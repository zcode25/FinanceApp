import{j as u,K as v,F as K,y as le,C as oe,G as T,l,D as ut,x as i,W as ne,X as pt,r as R,w as Z,f as se,J as mt,a as ft,i as _t,u as bt,k as x,m as xt,p as gt,q as e,s,A as N,v as P,M as Y,z as Ce,I as F,H as vt,L as ht,T as Re,V as yt}from"./vendor-COAloQYc.js";import{_ as wt}from"./Layout-CBYRxzJr.js";import{P as Oe,a as re,y as ce,ab as Ne,ac as $e,ad as Ue,X as ue,N as qe,D as Ee,a3 as kt,ae as Tt,A as St,t as U,l as Le}from"./ui--a78tfA0.js";/* empty css               */import{_ as Fe}from"./CurrencyInput-DdFd4TZx.js";import{_ as jt}from"./CategoryCombobox-C2HVmrZ1.js";import{_ as Me}from"./SearchableSelect-mpvobWji.js";import{_ as Dt}from"./PremiumUpsellModal-BcgFPKlL.js";import"./app-DwMN8-H6.js";/* empty css            */const It={key:0,class:"flex items-center gap-1.5"},Ct=["innerHTML"],Rt={__name:"Pagination",props:{links:Array},setup(m){const d=_=>_.includes("Previous")?"Prev":_.includes("Next")?"Next":_;return(_,p)=>m.links.length>3?(i(),u("div",It,[(i(!0),u(K,null,le(m.links,(b,y)=>(i(),u(K,{key:y},[b.url===null?(i(),u("div",{key:0,class:"px-3 py-2 text-xs font-bold text-slate-300 select-none",innerHTML:d(b.label)},null,8,Ct)):(i(),oe(l(ut),{key:1,href:b.url,innerHTML:d(b.label),"preserve-scroll":"",class:T(["min-w-[38px] h-[38px] flex items-center justify-center px-3 py-2 text-xs font-bold rounded-xl border transition-all duration-300",[b.active?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-100 ring-2 ring-indigo-600/10":"bg-white text-slate-500 border-slate-200 hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-100 hover:shadow-sm"]])},null,8,["href","innerHTML","class"]))],64))),128))])):v("",!0)}};var pe,Ve;function tt(){if(Ve)return pe;Ve=1;function m(d){var _=typeof d;return d!=null&&(_=="object"||_=="function")}return pe=m,pe}var me,Ae;function Ot(){if(Ae)return me;Ae=1;var m=typeof ne=="object"&&ne&&ne.Object===Object&&ne;return me=m,me}var fe,Be;function st(){if(Be)return fe;Be=1;var m=Ot(),d=typeof self=="object"&&self&&self.Object===Object&&self,_=m||d||Function("return this")();return fe=_,fe}var _e,Pe;function Nt(){if(Pe)return _e;Pe=1;var m=st(),d=function(){return m.Date.now()};return _e=d,_e}var be,We;function $t(){if(We)return be;We=1;var m=/\s/;function d(_){for(var p=_.length;p--&&m.test(_.charAt(p)););return p}return be=d,be}var xe,ze;function Ut(){if(ze)return xe;ze=1;var m=$t(),d=/^\s+/;function _(p){return p&&p.slice(0,m(p)+1).replace(d,"")}return xe=_,xe}var ge,Ge;function ot(){if(Ge)return ge;Ge=1;var m=st(),d=m.Symbol;return ge=d,ge}var ve,He;function qt(){if(He)return ve;He=1;var m=ot(),d=Object.prototype,_=d.hasOwnProperty,p=d.toString,b=m?m.toStringTag:void 0;function y(w){var S=_.call(w,b),k=w[b];try{w[b]=void 0;var f=!0}catch{}var c=p.call(w);return f&&(S?w[b]=k:delete w[b]),c}return ve=y,ve}var he,Je;function Et(){if(Je)return he;Je=1;var m=Object.prototype,d=m.toString;function _(p){return d.call(p)}return he=_,he}var ye,Xe;function Lt(){if(Xe)return ye;Xe=1;var m=ot(),d=qt(),_=Et(),p="[object Null]",b="[object Undefined]",y=m?m.toStringTag:void 0;function w(S){return S==null?S===void 0?b:p:y&&y in Object(S)?d(S):_(S)}return ye=w,ye}var we,Ze;function Ft(){if(Ze)return we;Ze=1;function m(d){return d!=null&&typeof d=="object"}return we=m,we}var ke,Ye;function Mt(){if(Ye)return ke;Ye=1;var m=Lt(),d=Ft(),_="[object Symbol]";function p(b){return typeof b=="symbol"||d(b)&&m(b)==_}return ke=p,ke}var Te,Ke;function Vt(){if(Ke)return Te;Ke=1;var m=Ut(),d=tt(),_=Mt(),p=NaN,b=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,w=/^0o[0-7]+$/i,S=parseInt;function k(f){if(typeof f=="number")return f;if(_(f))return p;if(d(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=d(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=m(f);var q=y.test(f);return q||w.test(f)?S(f.slice(2),q?2:8):b.test(f)?p:+f}return Te=k,Te}var Se,Qe;function At(){if(Qe)return Se;Qe=1;var m=tt(),d=Nt(),_=Vt(),p="Expected a function",b=Math.max,y=Math.min;function w(S,k,f){var c,q,V,A,I,M,j=0,B=!1,C=!1,Q=!0;if(typeof S!="function")throw new TypeError(p);k=_(k)||0,m(f)&&(B=!!f.leading,C="maxWait"in f,V=C?b(_(f.maxWait)||0,k):V,Q="trailing"in f?!!f.trailing:Q);function o(h){var L=c,O=q;return c=q=void 0,j=h,A=S.apply(O,L),A}function G(h){return j=h,I=setTimeout(H,k),B?o(h):A}function g(h){var L=h-M,O=h-j,te=k-L;return C?y(te,V-O):te}function W(h){var L=h-M,O=h-j;return M===void 0||L>=k||L<0||C&&O>=V}function H(){var h=d();if(W(h))return ee(h);I=setTimeout(H,g(h))}function ee(h){return I=void 0,Q&&c?o(h):(c=q=void 0,A)}function r(){I!==void 0&&clearTimeout(I),j=0,c=M=q=I=void 0}function ae(){return I===void 0?A:ee(d())}function J(){var h=d(),L=W(h);if(c=arguments,q=this,M=h,L){if(I===void 0)return G(M);if(C)return clearTimeout(I),I=setTimeout(H,k),o(M)}return I===void 0&&(I=setTimeout(H,k)),A}return J.cancel=r,J.flush=ae,J}return Se=w,Se}var Bt=At();const et=pt(Bt),Pt={class:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-30"},Wt={class:"space-y-1"},zt={class:"text-2xl md:text-3xl font-bold text-slate-900 tracking-tight"},Gt={class:"text-sm md:text-base text-slate-500 font-medium"},Ht={class:"overflow-x-auto lg:overflow-visible no-scrollbar -mx-4 px-4 lg:mx-0 lg:px-0 flex lg:grid lg:grid-cols-3 flex-nowrap gap-6 mb-8 lg:mb-10 scroll-smooth py-4 lg:py-0 -my-4 lg:my-0"},Jt={class:"min-w-[85vw] lg:min-w-0 relative overflow-hidden rounded-[2rem] p-8 bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-lg shadow-emerald-200"},Xt={class:"absolute right-0 top-0 p-8 opacity-10 transform translate-x-1/4 -translate-y-1/4"},Zt={class:"relative z-10"},Yt={class:"flex items-center gap-3 mb-6"},Kt={class:"p-3 bg-white/20 backdrop-blur-md rounded-2xl border border-white/20 shadow-inner"},Qt={class:"font-bold text-lg text-white/90 tracking-tight"},es={class:"space-y-1"},ts={class:"text-3xl font-bold tracking-tight tabular-nums"},ss={class:"flex items-center gap-2 text-emerald-100 font-medium text-sm"},os={class:"bg-white/20 px-2 py-0.5 rounded-lg text-white text-xs font-bold backdrop-blur-sm border border-white/10"},as={class:"min-w-[85vw] lg:min-w-0 relative overflow-hidden rounded-[2rem] p-8 bg-gradient-to-br from-rose-500 to-pink-600 text-white shadow-lg shadow-rose-200"},ns={class:"absolute right-0 top-0 p-8 opacity-10 transform translate-x-1/4 -translate-y-1/4"},rs={class:"relative z-10"},ls={class:"flex items-center gap-3 mb-6"},is={class:"p-3 bg-white/20 backdrop-blur-md rounded-2xl border border-white/20 shadow-inner"},ds={class:"font-bold text-lg text-white/90 tracking-tight"},cs={class:"space-y-1"},us={class:"text-3xl font-bold tracking-tight tabular-nums"},ps={class:"flex items-center gap-2 text-rose-100 font-medium text-sm"},ms={class:"bg-white/20 px-2 py-0.5 rounded-lg text-white text-xs font-bold backdrop-blur-sm border border-white/10"},fs={class:"min-w-[85vw] lg:min-w-0 relative overflow-hidden rounded-[2rem] p-8 bg-gradient-to-br from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-200"},_s={class:"absolute right-0 top-0 p-8 opacity-10 transform translate-x-1/4 -translate-y-1/4"},bs={class:"relative z-10"},xs={class:"flex items-center gap-3 mb-6"},gs={class:"p-3 bg-white/20 backdrop-blur-md rounded-2xl border border-white/20 shadow-inner"},vs={class:"font-bold text-lg text-white/90 tracking-tight"},hs={class:"space-y-1"},ys={class:"text-3xl font-bold tracking-tight tabular-nums"},ws={class:"flex items-center gap-2 text-indigo-100 font-medium text-sm"},ks={class:"bg-white/20 px-2 py-0.5 rounded-lg text-white text-xs font-bold backdrop-blur-sm border border-white/10"},Ts={class:"mb-8 lg:mb-8 flex items-center justify-between gap-6"},Ss={class:"relative flex-1 max-w-xl group"},js=["placeholder"],Ds={key:0,class:"glass-card mb-8 lg:mb-8 p-8 bg-white border border-slate-200 rounded-3xl shadow-xl shadow-slate-200/40 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 animate-in slide-in-from-top-4 duration-300"},Is={class:"space-y-2"},Cs={class:"block text-xs font-bold text-slate-500 ml-1"},Rs={class:"relative group"},Os={value:""},Ns=["value"],$s={class:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400 group-hover:text-slate-600 transition-colors"},Us={class:"space-y-2"},qs={class:"block text-xs font-bold text-slate-500 ml-1"},Es={class:"flex p-1.5 bg-slate-50 rounded-xl border border-slate-200 h-[50px]"},Ls={class:"space-y-2"},Fs={class:"block text-xs font-bold text-slate-500 ml-1"},Ms={class:"space-y-2"},Vs={class:"block text-xs font-bold text-slate-500 ml-1"},As={class:"sm:col-span-2 lg:col-span-4 flex justify-end pt-2"},Bs={id:"tour-transaction-list",class:""},Ps={key:0},Ws={class:"hidden md:block bg-white border border-slate-100 rounded-3xl shadow-sm mb-12 overflow-hidden"},zs={class:"overflow-x-auto"},Gs={class:"w-full text-left"},Hs={class:"bg-slate-50/50 border-b border-slate-100"},Js={class:"text-xs font-bold text-slate-500 tracking-tight"},Xs={class:"px-6 py-4"},Zs={class:"px-6 py-4"},Ys={class:"px-6 py-4"},Ks={class:"px-6 py-4"},Qs={class:"px-6 py-4 text-right px-8"},eo={class:"px-6 py-4 text-right"},to={class:"divide-y divide-slate-50"},so={class:"px-6 py-4"},oo={class:"text-sm font-semibold text-slate-700 whitespace-nowrap"},ao={class:"px-6 py-4"},no={class:"text-sm font-normal text-slate-900 group-hover:text-indigo-900 transition-colors"},ro={class:"px-6 py-4"},lo={class:"flex items-center gap-2"},io={class:"text-sm font-semibold text-slate-600"},co={key:0,class:"text-slate-400 font-normal ml-1"},uo={class:"px-6 py-4"},po={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold text-white border border-white/20 bg-indigo-500"},mo={class:"px-6 py-4 text-right px-8"},fo={class:"space-y-1"},_o={key:0,class:"text-[10px] text-slate-400 font-bold block"},bo={class:"px-6 py-4 text-right"},xo={class:"flex items-center justify-end gap-2"},go=["onClick"],vo=["onClick"],ho={class:"px-8 py-5 bg-slate-50/50 border-t border-slate-100 flex items-center justify-between"},yo={class:"flex items-center gap-4"},wo={class:"flex items-center gap-2"},ko={class:"text-xs font-bold text-slate-500"},To={value:10},So={value:25},jo={value:50},Do={value:100},Io={class:"text-xs font-semibold text-slate-400"},Co={class:"md:hidden space-y-4 mb-4"},Ro=["onClick"],Oo={class:"flex justify-between items-start gap-3"},No={class:"flex flex-col gap-1 min-w-0 flex-1"},$o={class:"text-[10px] font-bold text-slate-400 tracking-wider"},Uo={class:"min-w-0"},qo={class:"text-[14px] font-bold text-slate-900 line-clamp-1 leading-tight mb-1.5"},Eo={class:"flex items-center gap-2 overflow-hidden flex-wrap sm:flex-nowrap"},Lo={key:0,class:"inline-flex flex-shrink-0 px-2 py-0.5 rounded-full text-[9px] font-bold text-white border border-white/20 whitespace-nowrap bg-indigo-500"},Fo={class:"text-[10px] font-semibold text-slate-400 flex items-center gap-1.5 min-w-0"},Mo={class:"truncate"},Vo={key:0,class:"text-slate-400 ml-0.5"},Ao={class:"text-right flex-shrink-0"},Bo={key:0,class:"text-[9px] text-slate-400 font-bold block mt-0.5"},Po={class:"pb-24 flex items-center justify-center"},Wo={class:"md:hidden w-full px-4"},zo=["disabled"],Go={class:"flex items-center gap-3"},Ho={key:0,class:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"},Jo={key:1,class:"text-xs font-bold text-slate-400 py-2"},Xo={key:1,class:"bg-white border border-slate-100 rounded-[2rem] shadow-sm flex flex-col items-center justify-center py-20 text-center mb-32 md:mb-0"},Zo={class:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-slate-100"},Yo={class:"text-slate-900 font-bold text-base mb-1"},Ko={class:"text-slate-500 text-sm mb-4"},Qo={key:0,class:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-4 overflow-y-auto"},ea={class:"relative z-10 w-full max-w-2xl max-h-[92vh] flex flex-col bg-white rounded-t-[2rem] sm:rounded-3xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300"},ta={class:"p-6 md:p-8 border-b border-slate-200 flex items-center justify-between shrink-0"},sa={class:"text-xl md:text-2xl font-bold text-slate-900 mb-1"},oa={class:"text-xs md:text-sm text-slate-500 font-medium"},aa={class:"p-6 md:p-8 overflow-y-auto flex-1"},na={class:"flex p-1.5 bg-slate-100 rounded-2xl border border-slate-200"},ra={key:0,class:"mt-1 text-[11px] font-bold text-rose-500 ml-1"},la={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ia={class:"block text-xs font-bold text-slate-700 mb-2"},da={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},ca={class:"block text-xs font-bold text-slate-700 mb-2"},ua={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},pa={class:"block text-xs font-bold text-slate-700 mb-2"},ma={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},fa={key:1,class:"p-5 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-200 space-y-3"},_a={class:"flex items-center justify-between"},ba={class:"block text-xs font-bold text-indigo-900"},xa={class:"flex items-center gap-1.5 px-3 py-1 bg-indigo-500 text-xs font-bold text-white rounded-full shadow-sm"},ga=["placeholder"],va={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},ha={key:1,class:"flex items-center gap-2 text-sm font-bold text-indigo-700"},ya={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-indigo-50/50 rounded-2xl border border-indigo-100/50"},wa={class:"block text-xs font-bold text-slate-700 mb-2"},ka={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},Ta={class:"block text-xs font-bold text-slate-700 mb-2"},Sa={class:"text-slate-400 font-medium"},ja={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},Da={key:3},Ia={class:"block text-xs font-bold text-slate-700 mb-2"},Ca={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},Ra={class:"block text-xs font-bold text-slate-700 mb-2"},Oa={class:"text-slate-400 font-medium"},Na=["placeholder"],$a={key:0,class:"mt-2 text-[11px] font-bold text-rose-500 ml-1"},Ua={class:"flex gap-3 pt-2"},qa=["disabled"],Ea={key:0,class:"fixed inset-0 z-[100] flex items-end justify-center sm:items-center p-0 sm:p-6"},La={class:"relative z-10 w-full max-w-full sm:max-w-sm bg-white rounded-t-[2.5rem] sm:rounded-3xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300"},Fa={key:0,class:"p-6 space-y-6"},Ma={class:"flex items-start justify-between"},Va={class:"space-y-1"},Aa={class:"text-xs font-bold text-slate-400"},Ba={class:"text-xs font-semibold text-slate-500"},Pa={class:"text-center py-4"},Wa={key:0,class:"text-xs text-slate-400 font-bold mt-1 block"},za={class:"grid grid-cols-2 gap-4"},Ga={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100 space-y-1"},Ha={class:"text-[10px] font-bold text-slate-400"},Ja={class:"flex items-center gap-2"},Xa={class:"text-sm font-bold text-slate-700 truncate"},Za={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100 space-y-1"},Ya={class:"text-[10px] font-bold text-slate-400"},Ka={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-bold text-white mt-0.5 bg-indigo-500"},Qa={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100 space-y-2"},en={class:"text-[10px] font-bold text-slate-400"},tn={class:"text-sm font-medium text-slate-700 leading-relaxed break-words"},sn={class:"grid grid-cols-2 gap-3 pt-2"},je=`<div class="mt-4 flex justify-start">
    <button onclick="window.dispatchEvent(new CustomEvent('skip-tour'))" class="text-[11px] font-semibold text-slate-400 hover:text-rose-500 transition-colors">Skip Tutorial</button>
</div>`,bn={__name:"Index",props:{transactions:Object,categories:Array,wallets:Array,filters:Object,currentExchangeRate:Number,summary:Object},setup(m){const d=R(null),_=bt(),p=m,b=N(()=>p.summary||{total_income:0,total_expense:0,total_income_count:0,total_expense_count:0,net_balance:0}),y=R(!1),w=R(!1),S=R(null),k=R(p.filters.search||""),f=R(!1),c=R(null),q=n=>{c.value=n,f.value=!0},V=R(!1),A=N(()=>!!_.props.auth.user.is_premium),I=N(()=>p.categories.filter(n=>n.user_id!==null).length),M=N(()=>A.value||I.value<3),j=R(p.transactions.data),B=R(p.transactions.next_page_url),C=R(!1),Q=async()=>{if(!(!B.value||C.value)){C.value=!0;try{const n=await yt.get(B.value,{headers:{"X-Inertia":"true","X-Inertia-Version":_.version,Accept:"application/json"}});let a=[],t=null;if(n.data.props&&n.data.props.transactions)a=n.data.props.transactions.data,t=n.data.props.transactions.next_page_url;else if(n.data.transactions)a=n.data.transactions.data,t=n.data.transactions.next_page_url;else if(n.data.data)a=n.data.data,t=n.data.next_page_url;else if(typeof n.data=="string")try{const D=n.data.match(/data-page="([^"]+)"/);if(D&&D[1]){const $=D[1].replace(/&quot;/g,'"').replace(/&amp;/g,"&"),E=JSON.parse($);E.props&&E.props.transactions&&(a=E.props.transactions.data,t=E.props.transactions.next_page_url)}}catch(D){console.error("Failed to parse Inertia HTML response",D)}else a=Array.isArray(n.data)?n.data:[];if(Array.isArray(a)&&a.length>0){const D=new Set(j.value.map(E=>E.id)),$=a.filter(E=>!D.has(E.id));$.length>0&&(j.value=[...j.value,...$]),B.value=t}else console.warn("Load More: No valid transaction array found in response",n.data),t||(B.value=null)}catch(n){console.error("Failed to load more transactions",n),U.fire({toast:!0,position:"top-end",icon:"error",title:"Failed to load more transactions",showConfirmButton:!1,timer:3e3})}finally{C.value=!1}}},o=n=>_.props.translations?.[n]||n;Z(k,et(n=>{se.get("/transactions",{search:n,wallet_id:g.value.wallet_id,type:g.value.type,start_date:g.value.start_date,end_date:g.value.end_date},{preserveState:!0,replace:!0,preserveScroll:!0})},300));const G=R(!1),g=R({wallet_id:p.filters.wallet_id||"",type:p.filters.type||"",start_date:p.filters.start_date||"",end_date:p.filters.end_date||"",per_page:p.filters.per_page||10}),W=N(()=>!!(k.value||g.value.wallet_id||g.value.type||g.value.start_date||g.value.end_date));Z(g,et(n=>{se.get("/transactions",{search:k.value,...n},{preserveState:!0,replace:!0,preserveScroll:!0})},300),{deep:!0});const H=()=>{g.value={wallet_id:"",type:"",start_date:"",end_date:"",per_page:10}},ee=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jakarta",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),r=mt({amount:"",category:"",type:"expense",date:ee(),description:"",wallet_id:"",exchange_rate:"",target_wallet_id:"",fee:""}),ae=()=>{w.value=!1,S.value=null,r.reset(),r.clearErrors(),r.date=ee(),r.type="expense",y.value=!0},J=n=>{w.value=!0,S.value=n.id,r.clearErrors(),r.amount=n.amount,r.category=n.category&&typeof n.category=="object"?n.category.name:n.category,r.type=n.type,r.date=n.date,r.description=n.description||"",r.wallet_id=n.wallet_id,r.target_wallet_id=n.target_wallet_id||"",r.fee=n.fee||"",y.value=!0},h=N(()=>p.wallets.map(n=>({value:n.id,label:n.name}))),L=N(()=>p.wallets.filter(n=>n.id!==r.wallet_id).map(n=>({value:n.id,label:n.name}))),O=N(()=>{if(!r.wallet_id)return"IDR";const n=p.wallets.find(a=>a.id===r.wallet_id);return n?n.currency:"IDR"}),te=N(()=>O.value!=="IDR"),De=N(()=>{if(!te.value||!r.amount)return"";const n=r.exchange_rate||p.currentExchangeRate||0,a=r.amount*n;return`≈ ${new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a)}`});Z(()=>r.wallet_id,n=>{if(n){const a=p.wallets.find(t=>t.id===n);a&&a.currency!=="IDR"?r.exchange_rate=p.currentExchangeRate||"":r.exchange_rate=""}});const ie=n=>{switch(n){case"cash":return"bg-emerald-500";case"ewallet":return"bg-purple-500";case"bank":return"bg-orange-500";default:return"bg-indigo-500"}},at=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jakarta",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),[,on,an]=at.split("-");new Intl.DateTimeFormat("id-ID",{timeZone:"Asia/Jakarta",month:"long",year:"numeric"}).format(new Date);const nt=N(()=>{if(!b.value.total_income||b.value.total_income<=0)return 0;const n=(b.value.total_income-b.value.total_expense)/b.value.total_income*100;return Math.max(0,n)}),rt=N(()=>b.value.total_income_count||0),lt=N(()=>b.value.total_expense_count||0),z=R(p.transactions.data);Z(()=>p.transactions,n=>{z.value=n.data,C.value||(j.value=n.data)},{deep:!0});const Ie=n=>{U.fire({title:o("delete_transaction_title")||"Delete Transaction?",text:o("delete_transaction_confirm")||"Are you sure you want to delete this transaction?",icon:"warning",showCancelButton:!0,confirmButtonText:o("yes_delete")||"Yes, delete it",cancelButtonText:o("cancel")||"Cancel",customClass:{popup:"!rounded-[2rem] !p-10 !bg-white !shadow-2xl !border !border-slate-100 !font-sans !antialiased",title:"!text-xl !font-bold !text-slate-900 !pt-4 !pb-2 !px-0 !m-0 !leading-tight",htmlContainer:"!text-sm !font-semibold !text-slate-500 !leading-relaxed !pb-6 !px-0 !m-0",actions:"!flex !items-center !justify-center !gap-3 !mt-4 !w-full !px-0",confirmButton:"!inline-flex !items-center !justify-center !bg-rose-600 !text-white !font-bold !text-sm !rounded-xl !px-8 !py-3 !transition-all !shadow-sm hover:!shadow-rose-600/20 hover:!bg-rose-700 active:!scale-95 !border-none !outline-none !m-0 !cursor-pointer",cancelButton:"!inline-flex !items-center !justify-center !bg-slate-100 !text-slate-700 hover:!bg-slate-200 !font-bold !text-sm !rounded-xl !px-8 !py-3 !transition-all !shadow-sm !border-none !outline-none !m-0 !cursor-pointer active:!scale-95",icon:"!border-4 !border-rose-100 !text-rose-600 !scale-110 !mb-6 !mt-2"},buttonsStyling:!1,backdrop:"rgba(15, 23, 42, 0.4)"}).then(a=>{if(a.isConfirmed){const t=[...z.value],D=[...j.value];z.value=z.value.filter($=>$.id!==n.id),j.value=j.value.filter($=>$.id!==n.id),se.delete(`/transactions/${n.id}`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{U.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:E=>{E.addEventListener("mouseenter",U.stopTimer),E.addEventListener("mouseleave",U.resumeTimer)}}).fire({icon:"success",title:o("deleted_title"),background:"#ffffff",color:"#1e293b",customClass:{popup:"swal2-toast !rounded-2xl !p-4 shadow-xl border border-slate-100",title:"!text-sm !font-bold !text-slate-900"}})},onError:()=>{z.value=t,j.value=D,U.fire({toast:!0,position:"top-end",icon:"error",title:o("error_deleting"),showConfirmButton:!1,timer:3e3})}})}})},X=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),it=()=>{w.value?r.put(`/transactions/${S.value}`,{onSuccess:()=>{r.reset(),y.value=!1,U.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",U.stopTimer),a.addEventListener("mouseleave",U.resumeTimer)}}).fire({icon:"success",title:o("successfully_updated"),background:"#ffffff",color:"#1e293b",customClass:{popup:"swal2-toast !rounded-2xl !p-4 shadow-xl border border-slate-100",title:"!text-sm !font-bold !text-slate-900"}})}}):r.post("/transactions",{onSuccess:()=>{r.reset(),y.value=!1,U.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",U.stopTimer),a.addEventListener("mouseleave",U.resumeTimer)}}).fire({icon:"success",title:o("successfully_saved"),background:"#ffffff",color:"#1e293b",customClass:{popup:"swal2-toast !rounded-2xl !p-4 shadow-xl border border-slate-100",title:"!text-sm !font-bold !text-slate-900"}})}})},de=()=>{const n=localStorage.getItem("tour_state"),a=_.props.auth.user.has_completed_tour,t=["welcome","wallet_setup","transaction_setup"];if(!(d.value&&document.querySelector(".driver-popover"))&&(!n||n&&t.includes(n))){if(!n||n!=="transaction_setup"){if(!n&&a)return;localStorage.setItem("tour_state","transaction_setup")}const D=document.querySelector(".driver-popover"),$=document.querySelector(".driver-overlay");D&&D.remove(),$&&$.remove(),p.transactions.total===0?setTimeout(()=>{dt()},800):setTimeout(()=>{ct()},800)}};ft(()=>{de(),window.addEventListener("skip-tour",()=>{localStorage.removeItem("tour_state"),d.value&&d.value.destroy(),se.post("/user/complete-tour",{},{preserveScroll:!0,preserveState:!0})})}),_t(()=>{d.value&&d.value.destroy()}),Z(()=>_.url,()=>{de()}),Z(()=>p.transactions.total,(n,a)=>{localStorage.getItem("tour_state")==="transaction_setup"&&n>0&&(a===0||!a)&&de()});const dt=()=>{d.value=Le({showProgress:!0,animate:!0,allowClose:!0,overlayOpacity:.85,steps:[{element:"#tour-transaction-add",popover:{title:o("tour_tx_add_title"),description:o("tour_tx_add_desc")+je,position:"bottom"}}]}),d.value.drive()},ct=()=>{const n=window.innerWidth<768;d.value=Le({showProgress:!0,animate:!0,allowClose:!0,overlayOpacity:.85,onNextClick:()=>{d.value.isLastStep()?(localStorage.setItem("tour_state","dashboard_explanation"),se.visit("/dashboard"),d.value.destroy()):d.value.moveNext()},steps:[{element:"#tour-transaction-list",popover:{title:o("tour_tx_list_title"),description:o("tour_tx_list_desc")+je,position:n?"top":"bottom"}},{element:n?"#mobile-nav-home":"#nav-dashboard",popover:{title:o("tour_tx_full_picture_title"),description:o("tour_tx_full_picture_desc")+je,position:n?"top":"bottom"}}]}),d.value.drive()};return(n,a)=>(i(),u(K,null,[x(l(xt),{title:o("transactions")},null,8,["title"]),x(wt,null,{default:gt(()=>[e("header",Pt,[e("div",Wt,[e("h1",zt,s(o("transactions")),1),e("p",Gt,s(o("manage_and_monitor")),1)]),e("button",{id:"tour-transaction-add",onClick:ae,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-2xl font-bold text-sm shadow-lg shadow-indigo-200 hover:shadow-xl hover:shadow-indigo-300 active:scale-95 transition-all flex items-center justify-center gap-2"},[x(l(Oe),{class:"w-4 h-4"}),e("span",null,s(o("add_transaction")),1)])]),e("div",Ht,[e("div",Jt,[e("div",Xt,[x(l(re),{class:"w-32 h-32 text-white"})]),e("div",Zt,[e("div",Yt,[e("div",Kt,[x(l(re),{class:"w-6 h-6 text-white"})]),e("h3",Qt,s(o("total_income")),1)]),e("div",es,[e("h2",ts,s(X(b.value.total_income)),1),e("div",ss,[e("span",null,s(o("income_records")),1),e("span",os,s(rt.value)+" "+s(o("items")),1)])])])]),e("div",as,[e("div",ns,[x(l(ce),{class:"w-32 h-32 text-white"})]),e("div",rs,[e("div",ls,[e("div",is,[x(l(ce),{class:"w-6 h-6 text-white"})]),e("h3",ds,s(o("total_expense")),1)]),e("div",cs,[e("h2",us,s(X(b.value.total_expense)),1),e("div",ps,[e("span",null,s(o("expense_records")),1),e("span",ms,s(lt.value)+" "+s(o("items")),1)])])])]),e("div",fs,[e("div",_s,[x(l(Ne),{class:"w-32 h-32 text-white"})]),e("div",bs,[e("div",xs,[e("div",gs,[x(l(Ne),{class:"w-6 h-6 text-white"})]),e("h3",vs,s(o("net_balance")),1)]),e("div",hs,[e("h2",ys,s(X(b.value.net_balance)),1),e("div",ws,[e("span",null,s(o("savings_efficiency")),1),e("span",ks,s(nt.value.toFixed(1))+"%",1)])])])])]),e("div",Ts,[e("div",Ss,[x(l($e),{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>k.value=t),type:"text",placeholder:o("search_transactions"),class:"w-full bg-white border-none rounded-2xl pl-12 pr-10 py-4 text-slate-900 placeholder-slate-400 shadow-sm focus:ring-2 focus:ring-indigo-600/10 transition-all font-semibold"},null,8,js),[[Y,k.value]])]),e("button",{onClick:a[1]||(a[1]=t=>G.value=!G.value),class:T(["hidden md:flex items-center gap-3 px-6 py-4 bg-white border border-slate-100 rounded-2xl text-slate-600 hover:bg-slate-50 transition-all font-bold text-sm shadow-sm",{"bg-slate-50 ring-2 ring-indigo-600/10":G.value}])},[x(l(Ue),{class:"w-5 h-5 text-slate-400"}),e("span",null,s(o("filter")),1)],2)]),G.value?(i(),u("div",Ds,[e("div",Is,[e("label",Cs,s(o("wallet_source")),1),e("div",Rs,[P(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>g.value.wallet_id=t),class:"w-full bg-slate-50 border border-slate-200 rounded-xl text-slate-900 text-sm py-3.5 px-4 focus:ring-2 focus:ring-indigo-600/10 focus:border-indigo-600 appearance-none font-semibold transition-all"},[e("option",Os,s(o("all_wallets")),1),(i(!0),u(K,null,le(m.wallets,t=>(i(),u("option",{key:t.id,value:t.id},s(t.name),9,Ns))),128))],512),[[Ce,g.value.wallet_id]]),e("div",$s,[x(l(Ue),{class:"w-4 h-4"})])])]),e("div",Us,[e("label",qs,s(o("transaction_type")),1),e("div",Es,[e("button",{onClick:a[3]||(a[3]=t=>g.value.type=""),class:T(["flex-1 text-xs rounded-lg font-bold transition-all",g.value.type===""?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200/50":"text-slate-500 hover:text-slate-900"])},s(o("all")),3),e("button",{onClick:a[4]||(a[4]=t=>g.value.type="income"),class:T(["flex-1 text-xs rounded-lg font-bold transition-all",g.value.type==="income"?"bg-emerald-500 text-white shadow-md":"text-slate-500 hover:text-slate-900"])},s(o("income")),3),e("button",{onClick:a[5]||(a[5]=t=>g.value.type="expense"),class:T(["flex-1 text-xs rounded-lg font-bold transition-all",g.value.type==="expense"?"bg-rose-500 text-white shadow-md":"text-slate-500 hover:text-slate-900"])},s(o("expense")),3)])]),e("div",Ls,[e("label",Fs,s(o("from_date")),1),P(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>g.value.start_date=t),type:"date",class:"w-full bg-slate-50 border border-slate-200 rounded-xl text-slate-900 text-sm py-3 px-4 focus:ring-2 focus:ring-indigo-600/10 focus:border-indigo-600 font-semibold transition-all"},null,512),[[Y,g.value.start_date]])]),e("div",Ms,[e("label",Vs,s(o("to_date")),1),P(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>g.value.end_date=t),type:"date",class:"w-full bg-slate-50 border border-slate-200 rounded-xl text-slate-900 text-sm py-3 px-4 focus:ring-2 focus:ring-indigo-600/10 focus:border-indigo-600 font-semibold transition-all"},null,512),[[Y,g.value.end_date]])]),e("div",As,[e("button",{onClick:H,class:"text-xs font-bold text-slate-400 hover:text-indigo-600 transition-all flex items-center gap-2 px-4 py-2 hover:bg-indigo-50 rounded-xl border border-transparent hover:border-indigo-100"},[x(l(ue),{class:"w-3.5 h-3.5"}),e("span",null,s(o("reset_all_filters")),1)])])])):v("",!0),e("div",Bs,[z.value.length>0?(i(),u("div",Ps,[e("div",Ws,[e("div",zs,[e("table",Gs,[e("thead",Hs,[e("tr",Js,[e("th",Xs,s(o("date")),1),e("th",Zs,s(o("description")),1),e("th",Ys,s(o("wallet")),1),e("th",Ks,s(o("category")),1),e("th",Qs,s(o("amount")),1),e("th",eo,s(o("actions")),1)])]),e("tbody",to,[(i(!0),u(K,null,le(z.value,t=>(i(),u("tr",{key:t.id+"_"+t.computed_type,class:"group hover:bg-slate-50/80 transition-colors"},[e("td",so,[e("div",oo,s(new Date(t.date).toLocaleDateString(n.$page.props.locale==="id"?"id-ID":"en-GB",{day:"numeric",month:"short",year:"numeric"})),1)]),e("td",ao,[e("div",no,s(t.type==="transfer"?t.computed_type==="transfer_in"?t.description||"Transfer from "+(t.wallet?.name||"Wallet"):t.description||"Transfer to "+(t.target_wallet?.name||t.targetWallet?.name||"Wallet"):t.description||(t.category?t.category.name:o("unknown"))),1)]),e("td",ro,[e("div",lo,[e("div",{class:T(["w-2 h-2 rounded-full",ie(t.wallet?.type)])},null,2),e("span",io,[F(s(t.computed_type==="transfer_in"?t.target_wallet?.name||t.targetWallet?.name||o("unknown"):t.wallet?t.wallet.name:o("unknown"))+" ",1),t.type==="transfer"?(i(),u("span",co,s(t.computed_type==="transfer_in"?"← "+(t.wallet?.name||"Unknown"):"→ "+(t.target_wallet?.name||t.targetWallet?.name||"Unknown")),1)):v("",!0)])])]),e("td",uo,[t.type==="transfer"?(i(),u("span",po,s(t.computed_type==="transfer_in"?"Transfer In":"Transfer Out"),1)):(i(),u("span",{key:1,class:T(["inline-flex items-center px-3 py-1 rounded-full text-xs font-bold text-white border border-white/20",t.category?.color||"bg-slate-500"])},s(t.category?t.category.name:"Uncategorized"),3))]),e("td",mo,[e("div",fo,[e("span",{class:T(["text-sm font-bold tabular-nums block",t.computed_type==="expense"||t.computed_type==="transfer_out"?"text-slate-900":"text-emerald-600"])},s(t.computed_type==="expense"||t.computed_type==="transfer_out"?"-":"+")+" "+s(new Intl.NumberFormat(t.currency==="USD"?"en-US":"id-ID",{style:"currency",currency:t.currency||"IDR",maximumFractionDigits:0}).format(t.computed_type==="transfer_out"?Number(t.amount)+Number(t.fee||0):t.amount)),3),t.currency!=="IDR"&&t.amount_in_base_currency?(i(),u("span",_o," ≈ "+s(X(t.amount_in_base_currency)),1)):v("",!0)])]),e("td",bo,[e("div",xo,[e("button",{onClick:D=>J(t),class:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 border border-transparent hover:border-indigo-100 rounded-lg transition-all"},[x(l(qe),{class:"w-4 h-4"})],8,go),e("button",{onClick:D=>Ie(t),class:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 border border-transparent hover:border-rose-100 rounded-lg transition-all"},[x(l(Ee),{class:"w-4 h-4"})],8,vo)])])]))),128))])])]),e("div",ho,[e("div",yo,[e("div",wo,[e("span",ko,s(o("show")),1),P(e("select",{"onUpdate:modelValue":a[8]||(a[8]=t=>g.value.per_page=t),class:"appearance-none bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 py-2 px-4 pr-10 focus:ring-2 focus:ring-indigo-600/10 focus:border-indigo-600 transition-all outline-none cursor-pointer shadow-sm"},[e("option",To,"10 "+s(o("entries")),1),e("option",So,"25 "+s(o("entries")),1),e("option",jo,"50 "+s(o("entries")),1),e("option",Do,"100 "+s(o("entries")),1)],512),[[Ce,g.value.per_page]])]),e("span",Io,s(o("showing"))+" "+s(m.transactions.from||0)+" "+s(o("to"))+" "+s(m.transactions.to||0)+" "+s(o("of_paging"))+" "+s(m.transactions.total)+" "+s(o("entries")),1)]),x(Rt,{links:m.transactions.links},null,8,["links"])])]),e("div",Co,[(i(!0),u(K,null,le(j.value,t=>(i(),u("div",{key:t.id+"_"+t.computed_type,onClick:D=>q(t),class:"p-4 bg-white rounded-2xl border border-slate-100 shadow-sm transition-all animate-in fade-in slide-in-from-bottom-2 duration-300 cursor-pointer active:bg-slate-50"},[e("div",Oo,[e("div",No,[e("p",$o,s(new Date(t.date).getDate())+" "+s(new Date(t.date).toLocaleDateString(l(_).props.locale||"id-ID",{month:"short"}))+" "+s(new Date(t.date).getFullYear()),1),e("div",Uo,[e("h4",qo,s(t.type==="transfer"?t.computed_type==="transfer_in"?t.description||"Transfer from "+(t.wallet?.name||"Wallet"):t.description||"Transfer to "+(t.target_wallet?.name||t.targetWallet?.name||"Wallet"):t.description||(t.category?t.category.name:o("unknown"))),1),e("div",Eo,[t.type==="transfer"?(i(),u("span",Lo,s(t.computed_type==="transfer_in"?"Transfer In":"Transfer Out"),1)):(i(),u("span",{key:1,class:T(["inline-flex flex-shrink-0 px-2 py-0.5 rounded-full text-[9px] font-bold text-white border border-white/20 whitespace-nowrap",t.category?.color||"bg-slate-500"])},s(t.category?t.category.name:o("uncategorized")),3)),e("span",Fo,[e("div",{class:T(["w-1.5 h-1.5 rounded-full flex-shrink-0",ie(t.wallet?.type)])},null,2),e("span",Mo,[F(s(t.computed_type==="transfer_in"?t.target_wallet?.name||t.targetWallet?.name||o("unknown"):t.wallet?t.wallet.name:o("unknown"))+" ",1),t.type==="transfer"?(i(),u("span",Vo,s(t.computed_type==="transfer_in"?"← "+(t.wallet?.name||"Unknown"):"→ "+(t.target_wallet?.name||t.targetWallet?.name||"Unknown")),1)):v("",!0)])])])])]),e("div",Ao,[e("span",{class:T(["text-[14px] font-bold tabular-nums tracking-tight block",t.computed_type==="expense"||t.computed_type==="transfer_out"?"text-slate-900":"text-emerald-600"])},s(t.computed_type==="expense"||t.computed_type==="transfer_out"?"-":"+")+" "+s(new Intl.NumberFormat(t.currency==="USD"?"en-US":"id-ID",{style:"currency",currency:t.currency||"IDR",maximumFractionDigits:0}).format(t.computed_type==="transfer_out"?Number(t.amount)+Number(t.fee||0):t.amount)),3),t.currency!=="IDR"&&t.amount_in_base_currency?(i(),u("span",Bo," ≈ "+s(X(t.amount_in_base_currency)),1)):v("",!0)])])],8,Ro))),128))]),e("div",Po,[e("div",Wo,[B.value?(i(),u("button",{key:0,onClick:Q,disabled:C.value,class:"w-full bg-white border border-slate-200 text-slate-600 font-bold text-sm py-4 px-6 rounded-2xl shadow-sm active:scale-95 transition-all flex items-center justify-between"},[e("div",Go,[C.value?(i(),u("span",Ho)):v("",!0),e("span",null,s(C.value?o("loading"):o("read_more")),1)]),C.value?v("",!0):(i(),oe(l(kt),{key:0,class:"w-5 h-5 text-slate-400"}))],8,zo)):(i(),u("span",Jo,s(o("no_more_transactions")),1))])])])):(i(),u("div",Xo,[e("div",Zo,[(i(),oe(vt(W.value?l($e):l(re)),{class:"w-8 h-8 text-slate-300"}))]),e("h4",Yo,s(W.value?o("no_results"):o("no_activity_detected")),1),e("p",Ko,s(W.value?o("no_results_desc"):o("start_tracking_finances")),1),W.value?v("",!0):(i(),u("button",{key:0,onClick:ae,class:"inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-50 text-indigo-700 hover:bg-indigo-100 rounded-xl text-sm font-bold transition-all active:scale-95 mx-auto"},[x(l(Oe),{class:"w-4 h-4"}),e("span",null,s(o("add_first_transaction")),1)]))]))])]),_:1}),(i(),oe(Re,{to:"body"},[y.value?(i(),u("div",Qo,[e("div",{onClick:a[9]||(a[9]=t=>y.value=!1),class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity"}),e("div",ea,[e("div",ta,[e("div",null,[e("h2",sa,s(w.value?o("edit_transaction"):o("add_transaction")),1),e("p",oa,s(w.value?o("edit_transaction_details"):o("fill_transaction_info")),1)]),e("button",{onClick:a[10]||(a[10]=t=>y.value=!1),class:"p-2 hover:bg-slate-100 rounded-xl text-slate-400 hover:text-slate-900 transition-all"},[x(l(ue),{class:"w-6 h-6"})])]),e("div",aa,[e("form",{onSubmit:ht(it,["prevent"]),class:"space-y-6"},[e("div",na,[e("button",{type:"button",onClick:a[11]||(a[11]=t=>l(r).type="income"),class:T([l(r).type==="income"?"bg-emerald-500 text-white shadow-lg shadow-emerald-200":"text-slate-500 hover:text-slate-900","flex-1 py-3 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[x(l(re),{class:"w-4 h-4"}),F(" "+s(o("income")),1)],2),e("button",{type:"button",onClick:a[12]||(a[12]=t=>l(r).type="expense"),class:T([l(r).type==="expense"?"bg-rose-500 text-white shadow-lg shadow-rose-200":"text-slate-500 hover:text-slate-900","flex-1 py-3 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[x(l(ce),{class:"w-4 h-4"}),F(" "+s(o("expense")),1)],2),e("button",{type:"button",onClick:a[13]||(a[13]=t=>l(r).type="transfer"),class:T([l(r).type==="transfer"?"bg-indigo-500 text-white shadow-lg shadow-indigo-200":"text-slate-500 hover:text-slate-900","flex-1 py-3 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[x(l(Tt),{class:"w-4 h-4"}),a[29]||(a[29]=F(" Transfer ",-1))],2)]),l(r).errors.type?(i(),u("div",ra,s(l(r).errors.type),1)):v("",!0),e("div",la,[e("div",null,[e("label",ia,s(l(r).type==="transfer"?o("source_wallet")||"Source Wallet":o("wallet")),1),x(Me,{modelValue:l(r).wallet_id,"onUpdate:modelValue":a[14]||(a[14]=t=>l(r).wallet_id=t),options:h.value,placeholder:o("select_wallet")},null,8,["modelValue","options","placeholder"]),l(r).errors.wallet_id?(i(),u("div",da,s(l(r).errors.wallet_id),1)):v("",!0)]),e("div",null,[e("label",ca,s(o("date")),1),P(e("input",{"onUpdate:modelValue":a[15]||(a[15]=t=>l(r).date=t),type:"date",class:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all font-semibold text-sm"},null,512),[[Y,l(r).date]]),l(r).errors.date?(i(),u("div",ua,s(l(r).errors.date),1)):v("",!0)])]),e("div",null,[e("label",pa,s(o("amount")),1),x(Fe,{modelValue:l(r).amount,"onUpdate:modelValue":a[16]||(a[16]=t=>l(r).amount=t),currency:O.value,placeholder:O.value==="USD"?"$ 0":"Rp 0"},null,8,["modelValue","currency","placeholder"]),l(r).errors.amount?(i(),u("div",ma,s(l(r).errors.amount),1)):v("",!0)]),te.value?(i(),u("div",fa,[e("div",_a,[e("label",ba,s(o("exchange_rate"))+" ("+s(O.value)+" to IDR)",1),e("div",xa,[x(l(St),{class:"w-3 h-3"}),F(" "+s(o("auto")),1)])]),P(e("input",{"onUpdate:modelValue":a[17]||(a[17]=t=>l(r).exchange_rate=t),type:"number",step:"0.01",class:"w-full bg-white border border-indigo-200 rounded-xl px-4 py-3 font-mono text-indigo-900 focus:ring-2 focus:ring-indigo-500 transition-all font-semibold",placeholder:`1 ${O.value} = ... IDR`},null,8,ga),[[Y,l(r).exchange_rate]]),l(r).errors.exchange_rate?(i(),u("div",va,s(l(r).errors.exchange_rate),1)):v("",!0),De.value?(i(),u("div",ha,[e("span",null,s(o("conversion"))+":",1),e("span",null,s(De.value),1)])):v("",!0)])):v("",!0),l(r).type==="transfer"?(i(),u("div",ya,[e("div",null,[e("label",wa,s(o("target_wallet")),1),x(Me,{modelValue:l(r).target_wallet_id,"onUpdate:modelValue":a[18]||(a[18]=t=>l(r).target_wallet_id=t),options:L.value,placeholder:o("select_wallet")},null,8,["modelValue","options","placeholder"]),l(r).errors.target_wallet_id?(i(),u("div",ka,s(l(r).errors.target_wallet_id),1)):v("",!0)]),e("div",null,[e("label",Ta,[F(s(o("admin_fee"))+" ",1),e("span",Sa,"("+s(o("optional"))+")",1)]),x(Fe,{modelValue:l(r).fee,"onUpdate:modelValue":a[19]||(a[19]=t=>l(r).fee=t),currency:O.value,placeholder:O.value==="USD"?"$ 0":"Rp 0"},null,8,["modelValue","currency","placeholder"]),l(r).errors.fee?(i(),u("div",ja,s(l(r).errors.fee),1)):v("",!0)])])):(i(),u("div",Da,[e("label",Ia,s(o("category")),1),x(jt,{modelValue:l(r).category,"onUpdate:modelValue":a[20]||(a[20]=t=>l(r).category=t),categories:m.categories,type:l(r).type,placeholder:o("select_or_type_category"),"can-create":M.value,onLimitReached:a[21]||(a[21]=t=>V.value=!0)},null,8,["modelValue","categories","type","placeholder","can-create"]),l(r).errors.category?(i(),u("div",Ca,s(l(r).errors.category),1)):v("",!0)])),e("div",null,[e("label",Ra,[F(s(o("description"))+" ",1),e("span",Oa,"("+s(o("optional"))+")",1)]),P(e("textarea",{"onUpdate:modelValue":a[22]||(a[22]=t=>l(r).description=t),class:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 min-h-[100px] text-sm font-medium text-slate-900 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all resize-none",placeholder:o("details_placeholder")},null,8,Na),[[Y,l(r).description]]),l(r).errors.description?(i(),u("div",$a,s(l(r).errors.description),1)):v("",!0)]),e("div",Ua,[e("button",{type:"button",onClick:a[23]||(a[23]=t=>y.value=!1),class:"flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 px-6 py-4 rounded-xl font-bold text-sm transition-all"},s(o("cancel")),1),e("button",{type:"submit",disabled:l(r).processing,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-4 rounded-xl font-bold text-sm shadow-lg shadow-indigo-200 hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"},s(w.value?o("update_transaction"):o("save_transaction")),9,qa)])],32)])])])):v("",!0)])),(i(),oe(Re,{to:"body"},[f.value?(i(),u("div",Ea,[e("div",{onClick:a[24]||(a[24]=t=>f.value=!1),class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity"}),e("div",La,[c.value?(i(),u("div",Fa,[e("div",Ma,[e("div",Va,[e("h3",Aa,s(o("transaction_details")),1),e("p",Ba,s(new Date(c.value.date).toLocaleDateString(n.$page.props.locale==="id"?"id-ID":"en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),1)]),e("button",{onClick:a[25]||(a[25]=t=>f.value=!1),class:"p-2 -mr-2 -mt-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors"},[x(l(ue),{class:"w-5 h-5"})])]),e("div",Pa,[e("span",{class:T(["text-2xl font-bold tracking-tight tabular-nums block",c.value.computed_type==="expense"||c.value.computed_type==="transfer_out"?"text-slate-900":"text-emerald-500"])},s(c.value.computed_type==="expense"||c.value.computed_type==="transfer_out"?"-":"+")+" "+s(new Intl.NumberFormat(c.value.currency==="USD"?"en-US":"id-ID",{style:"currency",currency:c.value.currency||"IDR",maximumFractionDigits:0}).format(c.value.computed_type==="transfer_out"?Number(c.value.amount)+Number(c.value.fee||0):c.value.amount)),3),c.value.currency!=="IDR"&&c.value.amount_in_base_currency?(i(),u("span",Wa," ≈ "+s(X(c.value.amount_in_base_currency)),1)):v("",!0)]),e("div",za,[e("div",Ga,[e("p",Ha,s(o("wallet")),1),e("div",Ja,[e("div",{class:T(["w-2 h-2 rounded-full",ie(c.value.wallet?.type)])},null,2),e("p",Xa,s(c.value.computed_type==="transfer_in"?c.value.target_wallet?.name||c.value.targetWallet?.name:c.value.wallet?.name),1)])]),e("div",Za,[e("p",Ya,s(c.value.type==="transfer"?c.value.computed_type==="transfer_in"?o("source_wallet"):o("target_wallet"):o("category")),1),c.value.type==="transfer"?(i(),u("span",Ka,s(c.value.computed_type==="transfer_in"?c.value.wallet?.name||"Unknown":c.value.target_wallet?.name||c.value.targetWallet?.name||"Unknown"),1)):(i(),u("span",{key:1,class:T(["inline-flex items-center px-2 py-0.5 rounded-md text-[10px] font-bold text-white mt-0.5",c.value.category?.color||"bg-slate-500"])},s(c.value.category?c.value.category.name:o("uncategorized")),3))])]),e("div",Qa,[e("p",en,s(o("description")),1),e("p",tn,s(c.value.description||o("no_description_provided")),1)]),e("div",sn,[e("button",{onClick:a[26]||(a[26]=t=>{J(c.value),f.value=!1}),class:"flex items-center justify-center gap-2 py-3 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-xl font-bold text-sm transition-colors"},[x(l(qe),{class:"w-4 h-4"}),F(" "+s(o("edit")),1)]),e("button",{onClick:a[27]||(a[27]=t=>{Ie(c.value),f.value=!1}),class:"flex items-center justify-center gap-2 py-3 bg-rose-50 hover:bg-rose-100 text-rose-600 rounded-xl font-bold text-sm transition-colors"},[x(l(Ee),{class:"w-4 h-4"}),F(" "+s(o("delete")),1)])])])):v("",!0)])])):v("",!0)])),x(Dt,{show:V.value,title:o("category_limit_reached"),description:o("unlock_unlimited_categories"),onClose:a[28]||(a[28]=t=>V.value=!1)},null,8,["show","title","description"])],64))}};export{bn as default};
