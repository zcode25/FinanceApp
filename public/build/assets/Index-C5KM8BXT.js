import{A as se,l as oe,r as b,j as $,m as le,w as re,k as ae,c as d,a as c,s as E,u as r,h as ne,b as ie,d as e,t as n,i as g,f,o as i,F as j,g as O,C as P,q as L,z as _,e as de,v as ce,T as W}from"./app-z-5N8Bmv.js";import{A as ue}from"./driver-B4w0q6_T.js";import{_ as pe}from"./Layout-OwRbRFab.js";import{_ as me}from"./PremiumUpsellModal-CVxhdZxS.js";import{S as z}from"./sweetalert2.esm.all-BQxta0Da.js";import{P as xe}from"./plus-Clkuow8M.js";import{P as H}from"./pen-BsZSXH7O.js";import{T as R}from"./trash-2-DWrZ0ZBv.js";import{L as X}from"./lock-CdowRX5i.js";import{a as be}from"./wallet-ChqkXQDO.js";import{T as ge}from"./trending-down-CzJyzfM7.js";import{C as D}from"./circle-alert-VlzhY1Nq.js";import{X as fe}from"./x-bSxxunJc.js";import{C as _e}from"./check-C82AtN_H.js";/* empty css            */import"./badge-check-W2exgrox.js";import"./createLucideIcon-DnEbPiDu.js";import"./chevron-down-Bwexu4QU.js";import"./zap-DO75pTLS.js";import"./log-out-CQHF-4ZJ.js";const he={class:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-30"},ve={class:"space-y-1"},ye={class:"text-2xl md:text-3xl font-bold text-slate-900 tracking-tight"},we={class:"text-sm md:text-base text-slate-500 font-medium"},ke={id:"step-category-tabs",class:"flex md:inline-flex p-1 bg-slate-100 rounded-2xl mb-8 border border-slate-200/50 shadow-inner"},Ce={id:"tour-categories-grid",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-12 pb-24 md:pb-0"},Se=["onClick"],Te={class:"flex items-center justify-between"},$e={class:"flex items-center gap-3 md:gap-5"},je={class:"font-bold text-slate-900 group-hover:text-indigo-600 transition-colors tracking-tight text-[14px] md:text-lg leading-tight"},ze={class:"text-[10px] font-bold text-slate-400 mt-0.5"},Me={class:"hidden md:flex items-center gap-2"},Be=["onClick","title"],Ee=["onClick","title"],Pe=["title"],Le={key:0,class:"col-span-full py-20 text-center glass-card border-dashed border-slate-200"},De={class:"font-bold text-sm text-slate-300"},Ie={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center px-4 sm:px-6"},Ne={class:"relative bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden transform transition-all flex flex-col max-h-[90vh]"},Ue={class:"px-8 pt-8 pb-6 border-b border-slate-100 bg-white z-10"},qe={class:"text-xl font-bold text-slate-900"},Ae={class:"text-sm text-slate-500 mt-1"},Ve={class:"p-8 overflow-y-auto custom-scrollbar"},Fe={class:"flex p-1.5 bg-slate-100 rounded-2xl border border-slate-200"},Oe={key:0,class:"mt-2 text-xs font-bold text-rose-600 flex items-center gap-1.5"},We={class:"space-y-2"},He={class:"text-sm font-bold text-slate-700 ml-1"},Re=["placeholder"],Xe={key:0,class:"mt-2 text-xs font-bold text-rose-600 flex items-center gap-1.5"},Ge={class:"space-y-3"},Je={class:"text-sm font-bold text-slate-700 ml-1"},Ke={class:"grid grid-cols-8 gap-3"},Qe=["onClick"],Ye={key:0,class:"mt-2 text-xs font-bold text-rose-600 flex items-center gap-1.5"},Ze={class:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3 z-10"},et={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},tt={key:1},st={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center px-4 sm:px-6"},ot={class:"relative bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden transform transition-all p-6"},lt={class:"flex justify-between items-start mb-6"},rt={class:"flex items-center gap-4"},at={class:"text-xl font-bold text-slate-900 leading-tight"},nt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-slate-100 text-slate-600 mt-1 capitalize border border-slate-200"},it={class:"space-y-6"},dt={class:"grid grid-cols-2 gap-4"},ct={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},ut={class:"text-sm font-bold text-slate-700 capitalize"},pt={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},mt={class:"text-sm font-bold text-slate-700"},xt={key:0,class:"grid grid-cols-2 gap-3 pt-2"},bt={key:1,class:"p-4 bg-amber-50 rounded-2xl border border-amber-100 flex items-center gap-3"},gt={class:"text-xs font-bold text-amber-700 leading-relaxed"},y=`<div class="mt-4 flex justify-start">
    <button onclick="window.dispatchEvent(new CustomEvent('skip-tour'))" class="text-[11px] font-semibold text-slate-400 hover:text-rose-500 transition-colors">Skip Tutorial</button>
</div>`,Nt={__name:"Index",props:{categories:Array},setup(G){const p=b(null),I=G,w=ae(),t=(o,s={})=>{let l=w.props.translations?.[o]||o;return Object.keys(s).forEach(u=>{l=l.replace(`:${u}`,s[u])}),l},x=b("expense"),k=b(!1),h=b(!1),v=b(null),m=b(null),M=b(!1),J=L(()=>!!w.props.auth.user.is_premium),K=L(()=>I.categories.filter(o=>o.user_id!==null).length),Q=o=>{window.innerWidth<768&&(m.value=o,h.value=!0)},a=se({name:"",type:"expense",color:"bg-indigo-500"}),C=L(()=>!!v.value),Y=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500"],N=o=>I.categories.filter(s=>s.type===o),Z=()=>{if(!J.value&&K.value>=3){M.value=!0;return}v.value=null,a.reset(),a.clearErrors(),a.type=x.value,a.color="bg-indigo-500",k.value=!0},U=o=>{o.user_id&&(a.clearErrors(),v.value=o,a.name=o.name,a.type=o.type,a.color=o.color,k.value=!0)},S=()=>{k.value=!1,a.reset(),v.value=null},B=(o,s="success")=>{const l=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:F=>{F.addEventListener("mouseenter",z.stopTimer),F.addEventListener("mouseleave",z.resumeTimer)}}),u={success:"#1e293b",error:"#be123c"},T={success:"#ffffff",error:"#ffffff"},te={success:"border-slate-100",error:"border-rose-100"};l.fire({icon:s,title:o,background:T[s],color:u[s],customClass:{popup:`swal2-toast !rounded-2xl !p-4 shadow-xl border ${te[s]}`,title:s==="error"?"!text-sm !font-bold !text-rose-900":"!text-sm !font-bold !text-slate-900"}})},q=()=>{C.value?a.put(`/categories/${v.value.id}`,{onSuccess:()=>{S(),B(t("category_updated"))}}):a.post("/categories",{onSuccess:()=>{S(),B(t("category_created"))}})},A=o=>{o.user_id&&z.fire({title:t("delete_category_title",{name:o.name}),text:t("delete_category_text",{name:o.name}),icon:"warning",showCancelButton:!0,confirmButtonText:t("yes_delete"),cancelButtonText:t("cancel"),customClass:{popup:"!rounded-[2rem] !p-10 !bg-white !shadow-2xl !border !border-slate-100 !font-sans !antialiased",title:"!text-xl !font-bold !text-slate-900 !pt-4 !pb-2 !px-0 !m-0 !leading-tight",htmlContainer:"!text-sm !font-semibold !text-slate-500 !leading-relaxed !pb-6 !px-0 !m-0",actions:"!flex !items-center !justify-center !gap-3 !mt-4 !w-full !px-0",confirmButton:"!inline-flex !items-center !justify-center !bg-rose-600 !text-white !font-bold !text-sm !rounded-xl !px-8 !py-3 !transition-all !shadow-sm hover:!shadow-rose-600/20 hover:!bg-rose-700 active:!scale-95 !border-none !outline-none !m-0 !cursor-pointer",cancelButton:"!inline-flex !items-center !justify-center !bg-slate-100 !text-slate-700 hover:!bg-slate-200 !font-bold !text-sm !rounded-xl !px-8 !py-3 !transition-all !shadow-sm !border-none !outline-none !m-0 !cursor-pointer active:!scale-95",icon:"!border-4 !border-rose-100 !text-rose-600 !scale-110 !mb-6 !mt-2"},buttonsStyling:!1,backdrop:"rgba(15, 23, 42, 0.4)"}).then(s=>{s.isConfirmed&&$.delete(`/categories/${o.id}`,{onSuccess:()=>{B(t("category_deleted"))}})})},ee=()=>{const o=window.innerWidth<768;p.value=ue({showProgress:!0,animate:!0,allowClose:!0,overlayOpacity:.85,stagePadding:10,onNextClick:()=>{p.value.isLastStep()?(o?(localStorage.setItem("tour_state","hub_to_tracker"),$.visit("/dashboard")):(localStorage.setItem("tour_state","tracker_intro"),$.visit("/tracker")),p.value.destroy()):p.value.moveNext()},steps:[{element:"#step-add-category",popover:{title:`<span class="text-xl font-bold">${t("tour_personalize_categories_title")}</span>`,description:t("tour_personalize_categories_desc")+y,side:"bottom",align:"start"}},{element:"#step-category-tabs",popover:{title:`<span class="text-xl font-bold">${t("tour_income_expense_title")}</span>`,description:t("tour_income_expense_desc")+y,side:"bottom",align:"start"}},{element:"#tour-categories-grid",popover:{title:`<span class="text-xl font-bold">${t("tour_category_system_title")}</span>`,description:t("tour_category_system_desc")+y,side:"bottom",align:"start"}},{element:o?"#mobile-nav-home":"#nav-tracker",popover:{title:o?t("tour_return_dashboard_title"):`<span class="text-xl font-bold">${t("tour_wealth_map_title")}</span>`,description:o?t("tour_return_dashboard_desc")+y:t("tour_wealth_map_desc")+y,side:"bottom",align:"start"}}]}),p.value.drive()},V=()=>{const o=localStorage.getItem("tour_state"),s=w.props.auth.user.has_completed_tour,l=["welcome","wallet_setup","transaction_setup","dashboard_explanation","analysis_intro","budget_setup","goals_setup","hub_to_categories","categories_setup"];if(!(p.value&&document.querySelector(".driver-popover"))&&(!o||o&&l.includes(o))){if(!o||o!=="categories_setup"){if(!o&&s)return;localStorage.setItem("tour_state","categories_setup")}const u=document.querySelector(".driver-popover"),T=document.querySelector(".driver-overlay");u&&u.remove(),T&&T.remove(),setTimeout(ee,800)}};return oe(()=>{V(),window.addEventListener("skip-tour",()=>{localStorage.removeItem("tour_state"),p.value&&p.value.destroy(),$.post("/user/complete-tour",{},{preserveScroll:!0,preserveState:!0})})}),le(()=>{p.value&&p.value.destroy()}),re(()=>w.url,()=>{V()}),(o,s)=>(i(),d(j,null,[c(r(ne),{title:"Categories"}),c(pe,null,{default:ie(()=>[e("header",he,[e("div",ve,[e("h1",ye,n(t("categories_title")),1),e("p",we,n(t("categories_desc")),1)]),e("button",{id:"step-add-category",onClick:Z,class:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-sm flex items-center justify-center gap-2 transition-all shadow-lg shadow-indigo-200 hover:scale-[1.02] active:scale-95"},[c(r(xe),{class:"w-5 h-5"}),e("span",null,n(t("add_category")),1)])]),e("div",ke,[e("button",{onClick:s[0]||(s[0]=l=>x.value="expense"),class:g(["flex-1 md:flex-none px-6 py-2.5 rounded-xl font-bold text-sm transition-all duration-300",x.value==="expense"?"bg-white text-rose-600 shadow-sm ring-1 ring-slate-900/5 scale-100":"text-slate-500 hover:text-slate-700"])},n(t("expense_flows")),3),e("button",{onClick:s[1]||(s[1]=l=>x.value="income"),class:g(["flex-1 md:flex-none px-6 py-2.5 rounded-xl font-bold text-sm transition-all duration-300",x.value==="income"?"bg-white text-emerald-600 shadow-sm ring-1 ring-slate-900/5 scale-100":"text-slate-500 hover:text-slate-700"])},n(t("income_sources")),3)]),e("div",Ce,[(i(!0),d(j,null,O(N(x.value),l=>(i(),d("div",{key:l.id,onClick:u=>Q(l),class:"group relative glass-card p-5 md:p-6 transition-all duration-300 hover:bg-slate-50/50 cursor-pointer md:cursor-default active:scale-[0.98] active:md:scale-100"},[e("div",Te,[e("div",$e,[e("div",{class:g(["w-2.5 h-2.5 rounded-full shrink-0 shadow-sm",l.color])},null,2),e("div",null,[e("h3",je,n(l.name),1),e("p",ze,n(l.is_system?"System":"Custom"),1)])]),e("div",Me,[l.is_system?(i(),d("div",{key:1,class:"p-2.5 text-slate-200",title:t("system_category_lock_msg")},[c(r(X),{class:"w-4 h-4"})],8,Pe)):(i(),d(j,{key:0},[e("button",{onClick:P(u=>U(l),["stop"]),class:"p-2.5 text-slate-400 hover:text-indigo-600 rounded-xl transition-all border border-slate-100 hover:shadow-sm",title:t("edit_category")},[c(r(H),{class:"w-4 h-4"})],8,Be),e("button",{onClick:P(u=>A(l),["stop"]),class:"p-2.5 text-slate-400 hover:text-rose-600 rounded-xl transition-all border border-slate-100 hover:shadow-sm",title:t("delete_category_title",{name:l.name})},[c(r(R),{class:"w-4 h-4"})],8,Ee)],64))])])],8,Se))),128)),N(x.value).length===0?(i(),d("div",Le,[e("p",De,n(t("no_categories")),1)])):f("",!0)])]),_:1}),(i(),E(W,{to:"body"},[k.value?(i(),d("div",Ie,[e("div",{class:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity",onClick:S}),e("div",Ne,[e("div",Ue,[e("h2",qe,n(C.value?t("edit_category"):t("new_category")),1),e("p",Ae,n(C.value?t("update_category_desc"):t("new_category_desc")),1)]),e("div",Ve,[e("form",{onSubmit:P(q,["prevent"]),class:"space-y-6"},[e("div",Fe,[e("button",{type:"button",onClick:s[2]||(s[2]=l=>r(a).type="income"),class:g([r(a).type==="income"?"bg-emerald-500 text-white shadow-lg shadow-emerald-200":"text-slate-500 hover:text-slate-900","flex-1 py-3.5 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[c(r(be),{class:"w-4 h-4"}),_(" "+n(t("income")),1)],2),e("button",{type:"button",onClick:s[3]||(s[3]=l=>r(a).type="expense"),class:g([r(a).type==="expense"?"bg-rose-500 text-white shadow-lg shadow-rose-200":"text-slate-500 hover:text-slate-900","flex-1 py-3.5 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[c(r(ge),{class:"w-4 h-4"}),_(" "+n(t("expense")),1)],2)]),r(a).errors.type?(i(),d("p",Oe,[c(r(D),{class:"w-3.5 h-3.5"}),_(" "+n(r(a).errors.type),1)])):f("",!0),e("div",We,[e("label",He,n(t("category_name")),1),de(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>r(a).name=l),type:"text",class:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all font-semibold text-slate-700 placeholder-slate-400",placeholder:t("category_name_placeholder"),required:""},null,8,Re),[[ce,r(a).name]]),r(a).errors.name?(i(),d("p",Xe,[c(r(D),{class:"w-3.5 h-3.5"}),_(" "+n(r(a).errors.name),1)])):f("",!0)]),e("div",Ge,[e("label",Je,n(t("color_tag")),1),e("div",Ke,[(i(),d(j,null,O(Y,l=>e("button",{key:l,type:"button",onClick:u=>r(a).color=l,class:g(["w-9 h-9 rounded-full flex items-center justify-center transition-all hover:scale-110 active:scale-95 shadow-sm ring-2 ring-white",[l,r(a).color===l?"ring-offset-2 ring-indigo-500 scale-110":"opacity-70 hover:opacity-100"]])},[r(a).color===l?(i(),E(r(_e),{key:0,class:"w-4 h-4 text-white drop-shadow-md"})):f("",!0)],10,Qe)),64))]),r(a).errors.color?(i(),d("p",Ye,[c(r(D),{class:"w-3.5 h-3.5"}),_(" "+n(r(a).errors.color),1)])):f("",!0)])],32)]),e("div",Ze,[e("button",{onClick:S,type:"button",class:"flex-1 px-6 py-3.5 rounded-xl border border-slate-200 text-slate-600 font-bold text-sm hover:bg-white hover:border-slate-300 hover:text-slate-800 transition-all shadow-sm active:scale-95"},n(t("cancel")),1),e("button",{onClick:q,class:"flex-1 px-6 py-3.5 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-700 shadow-lg shadow-indigo-200 hover:shadow-xl hover:shadow-indigo-300 transition-all active:scale-95 flex items-center justify-center gap-2"},[r(a).processing?(i(),d("span",et)):(i(),d("span",tt,n(C.value?t("update_category_btn"):t("save_category_btn")),1))])])])])):f("",!0)])),(i(),E(W,{to:"body"},[h.value&&m.value?(i(),d("div",st,[e("div",{class:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity",onClick:s[5]||(s[5]=l=>h.value=!1)}),e("div",ot,[e("div",lt,[e("div",rt,[e("div",{class:g(["w-14 h-14 rounded-2xl flex items-center justify-center shadow-inner",m.value.color])},[...s[10]||(s[10]=[e("div",{class:"w-6 h-6 bg-white/30 rounded-full"},null,-1)])],2),e("div",null,[e("h2",at,n(m.value.name),1),e("span",nt,n(m.value.type),1)])]),e("button",{onClick:s[6]||(s[6]=l=>h.value=!1),class:"p-2 hover:bg-slate-100 rounded-xl text-slate-400 hover:text-slate-900 transition-all"},[c(r(fe),{class:"w-6 h-6"})])]),e("div",it,[e("div",dt,[e("div",ct,[s[11]||(s[11]=e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1"},"Type",-1)),e("p",ut,n(m.value.type),1)]),e("div",pt,[s[12]||(s[12]=e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1"},"Source",-1)),e("p",mt,n(m.value.is_system?"System":"Custom"),1)])]),m.value.is_system?(i(),d("div",bt,[c(r(X),{class:"w-5 h-5 text-amber-500 shrink-0"}),e("p",gt,n(t("system_category_lock_msg")),1)])):(i(),d("div",xt,[e("button",{onClick:s[7]||(s[7]=l=>{U(m.value),h.value=!1}),class:"flex items-center justify-center gap-2 py-3 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-xl font-bold text-sm transition-colors"},[c(r(H),{class:"w-4 h-4"}),_(" "+n(t("edit")),1)]),e("button",{onClick:s[8]||(s[8]=l=>{A(m.value),h.value=!1}),class:"flex items-center justify-center gap-2 py-3 bg-rose-50 hover:bg-rose-100 text-rose-600 rounded-xl font-bold text-sm transition-colors"},[c(r(R),{class:"w-4 h-4"}),_(" "+n(t("delete")),1)])]))])])])):f("",!0)])),c(me,{show:M.value,title:"Category Limit Reached",description:"Unlock unlimited categories to organize your expenses exactly the way you want with the Professional Plan.",onClose:s[9]||(s[9]=l=>M.value=!1)},null,8,["show"])],64))}};export{Nt as default};
