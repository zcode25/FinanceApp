import{r as m,w as p,c as f,d as y,a as w,i as _,b as I,f as N,o as g,z as D,t as T,P as C}from"./app-aa3v-XVd.js";const R={class:"relative"},S=["value","placeholder"],B={key:0,class:"absolute -bottom-7 left-0 text-xs font-semibold text-rose-600 bg-rose-50 border border-rose-100 px-3 py-1.5 rounded-lg flex items-center gap-2 shadow-sm"},k={__name:"CurrencyInput",props:{modelValue:[Number,String],placeholder:String,currency:{type:String,default:"IDR"}},emits:["update:modelValue"],setup(c,{emit:b}){const t=c,v=b,l=m(""),s=e=>e===""||e===null||e===void 0?"":new Intl.NumberFormat(t.currency==="IDR"?"id-ID":"en-US",{style:"currency",currency:t.currency,minimumFractionDigits:0,maximumFractionDigits:2}).format(e);t.modelValue&&(l.value=s(t.modelValue));const r=m("");let d;const x=e=>{const o=t.currency==="IDR"?",":".",h=new RegExp(`[^0-9${o}]`,"g");e.inputType==="insertText"&&e.data&&(h.test(e.data)?(r.value=`Numbers and '${o}' only`,clearTimeout(d),d=setTimeout(()=>r.value="",3e3)):r.value="");let n=e.target.value,a;t.currency==="IDR"?(a=n.replace(/\./g,""),a=a.replace(/,/g,".")):a=n.replace(/,/g,""),a=a.replace(/[^0-9.]/g,"");const u=a.split(".");u.length>2&&(a=u[0]+"."+u.slice(1).join("")),a.includes(".");let i=parseFloat(a);isNaN(i)&&(i=0),v("update:modelValue",i),l.value=n},V=()=>{r.value="",l.value=s(t.modelValue)};return p(()=>t.modelValue,e=>{l.value=s(e)}),p(()=>t.currency,()=>{t.modelValue&&(l.value=s(t.modelValue))}),(e,o)=>(g(),f("div",R,[y("input",{type:"text",value:l.value,onInput:x,onBlur:V,class:_(["w-full bg-slate-50 border border-slate-200 text-slate-900 placeholder-slate-400 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all px-4 py-3 font-semibold text-sm",{"border-rose-500 focus:border-rose-500 focus:ring-rose-500/20":r.value}]),placeholder:c.placeholder||"Rp 0"},null,42,S),w(C,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:I(()=>[r.value?(g(),f("div",B,[o[0]||(o[0]=y("span",{class:"w-1.5 h-1.5 rounded-full bg-rose-600 animate-pulse"},null,-1)),D(" "+T(r.value),1)])):N("",!0)]),_:1})]))}};export{k as _};
