import{r as g,w as J,J as le,a as ae,f as E,i as re,u as ne,j as d,k as c,C as P,l as a,m as ie,p as de,q as e,s as n,G as v,K as f,x as i,F as M,y as G,L as I,A as L,I as _,v as ce,M as ue,T as W}from"./vendor-COAloQYc.js";import{P as pe,O as H,D as K,o as R,a as me,y as xe,G as N,X as ge,t as z,l as be,r as ve}from"./ui-D5A2uRRy.js";/* empty css               */import{_ as fe}from"./Layout-D6L3EU_m.js";import{_ as _e}from"./PremiumUpsellModal-DINlnrjr.js";import"./app-BlDNi2YG.js";/* empty css            */const he={class:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-30"},ye={class:"space-y-1"},we={class:"text-2xl md:text-3xl font-bold text-slate-900 tracking-tight"},ke={class:"text-sm md:text-base text-slate-500 font-medium"},Ce={id:"step-category-tabs",class:"flex md:inline-flex p-1 bg-slate-100 rounded-2xl mb-8 border border-slate-200/50 shadow-inner"},Se={id:"tour-categories-grid",class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-12 pb-24 md:pb-0"},$e=["onClick"],Te={class:"flex items-center justify-between"},je={class:"flex items-center gap-3 md:gap-5"},Ee={class:"font-bold text-slate-900 group-hover:text-indigo-600 transition-colors tracking-tight text-[14px] md:text-lg leading-tight"},Me={class:"text-[10px] font-bold text-slate-400 mt-0.5"},ze={class:"hidden md:flex items-center gap-2"},Be=["onClick","title"],Pe=["onClick","title"],Ie=["title"],Le={key:0,class:"col-span-full py-20 text-center glass-card border-dashed border-slate-200"},Ne={class:"font-bold text-sm text-slate-300"},De={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center px-4 sm:px-6"},Oe={class:"relative bg-white rounded-[2rem] shadow-2xl w-full max-w-lg overflow-hidden transform transition-all flex flex-col max-h-[90vh]"},Fe={class:"px-8 pt-8 pb-6 border-b border-slate-100 bg-white z-10"},Ue={class:"text-xl font-bold text-slate-900"},qe={class:"text-sm text-slate-500 mt-1"},Ve={class:"p-8 overflow-y-auto custom-scrollbar"},Ae={class:"flex p-1.5 bg-slate-100 rounded-2xl border border-slate-200"},Je={key:0,class:"mt-2 text-xs font-bold text-rose-600 flex items-center gap-1.5"},Ge={class:"space-y-2"},We={class:"text-sm font-bold text-slate-700 ml-1"},He=["placeholder"],Ke={key:0,class:"mt-2 text-xs font-bold text-rose-600 flex items-center gap-1.5"},Re={class:"space-y-3"},Xe={class:"text-sm font-bold text-slate-700 ml-1"},Qe={class:"grid grid-cols-8 gap-3"},Ye=["onClick"],Ze={key:0,class:"mt-2 text-xs font-bold text-rose-600 flex items-center gap-1.5"},et={class:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3 z-10"},tt=["disabled"],st={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},ot={key:1},lt={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center px-4 sm:px-6"},at={class:"relative bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden transform transition-all p-6"},rt={class:"flex justify-between items-start mb-6"},nt={class:"flex items-center gap-4"},it={class:"text-xl font-bold text-slate-900 leading-tight"},dt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-slate-100 text-slate-600 mt-1 capitalize border border-slate-200"},ct={class:"space-y-6"},ut={class:"grid grid-cols-2 gap-4"},pt={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},mt={class:"text-sm font-bold text-slate-700 capitalize"},xt={class:"p-4 bg-slate-50 rounded-2xl border border-slate-100"},gt={class:"text-sm font-bold text-slate-700"},bt={key:0,class:"grid grid-cols-2 gap-3 pt-2"},vt={key:1,class:"p-4 bg-amber-50 rounded-2xl border border-amber-100 flex items-center gap-3"},ft={class:"text-xs font-bold text-amber-700 leading-relaxed"},C=`<div class="mt-4 flex justify-start">
    <button onclick="window.dispatchEvent(new CustomEvent('skip-tour'))" class="text-[11px] font-semibold text-slate-400 hover:text-rose-500 transition-colors">Skip Tutorial</button>
</div>`,$t={__name:"Index",props:{categories:Array},setup(X){const m=g(null),D=X,p=g([...D.categories]);J(()=>D.categories,o=>{p.value=[...o]},{deep:!0});const S=ne(),s=(o,t={})=>{let l=S.props.translations?.[o]||o;return Object.keys(t).forEach(u=>{l=l.replace(`:${u}`,t[u])}),l},b=g("expense"),h=g(!1),y=g(!1),w=g(null),x=g(null),B=g(!1),Q=L(()=>!!S.props.auth.user.is_premium),Y=L(()=>p.value.filter(o=>o.user_id!==null).length),Z=o=>{window.innerWidth<768&&(x.value=o,y.value=!0)},r=le({name:"",type:"expense",color:"bg-indigo-500"}),$=L(()=>!!w.value),ee=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500"],O=o=>p.value.filter(t=>t.type===o),te=()=>{if(!Q.value&&Y.value>=3){B.value=!0;return}w.value=null,r.reset(),r.clearErrors(),r.type=b.value,r.color="bg-indigo-500",h.value=!0},F=o=>{o.user_id&&(r.clearErrors(),w.value=o,r.name=o.name,r.type=o.type,r.color=o.color,h.value=!0)},T=()=>{h.value=!1,r.reset(),w.value=null},k=(o,t="success")=>{const l=z.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:A=>{A.addEventListener("mouseenter",z.stopTimer),A.addEventListener("mouseleave",z.resumeTimer)}}),u={success:"#1e293b",error:"#be123c"},j={success:"#ffffff",error:"#ffffff"},oe={success:"border-slate-100",error:"border-rose-100"};l.fire({icon:t,title:o,background:j[t],color:u[t],customClass:{popup:`swal2-toast !rounded-2xl !p-4 shadow-xl border ${oe[t]}`,title:t==="error"?"!text-sm !font-bold !text-rose-900":"!text-sm !font-bold !text-slate-900"}})},U=()=>{if($.value){const o=JSON.parse(JSON.stringify(p.value)),t=p.value.findIndex(u=>u?.id===w.value?.id);t!==-1&&(p.value[t]={...p.value[t],name:r.name,type:r.type,color:r.color});const l=w.value.id;h.value=!1,r.put(`/categories/${l}`,{onSuccess:()=>{T(),k(s("category_updated"))},onError:()=>{p.value=o,h.value=!0,k("Failed to update category","error")}})}else r.post("/categories",{onSuccess:()=>{T(),k(s("category_created"))}})},q=o=>{o.user_id&&z.fire({title:s("delete_category_title",{name:o.name}),text:s("delete_category_text",{name:o.name}),icon:"warning",showCancelButton:!0,confirmButtonText:s("yes_delete"),cancelButtonText:s("cancel"),customClass:{popup:"!rounded-[2rem] !p-10 !bg-white !shadow-2xl !border !border-slate-100 !font-sans !antialiased",title:"!text-xl !font-bold !text-slate-900 !pt-4 !pb-2 !px-0 !m-0 !leading-tight",htmlContainer:"!text-sm !font-semibold !text-slate-500 !leading-relaxed !pb-6 !px-0 !m-0",actions:"!flex !items-center !justify-center !gap-3 !mt-4 !w-full !px-0",confirmButton:"!inline-flex !items-center !justify-center !bg-rose-600 !text-white !font-bold !text-sm !rounded-xl !px-8 !py-3 !transition-all !shadow-sm hover:!shadow-rose-600/20 hover:!bg-rose-700 active:!scale-95 !border-none !outline-none !m-0 !cursor-pointer",cancelButton:"!inline-flex !items-center !justify-center !bg-slate-100 !text-slate-700 hover:!bg-slate-200 !font-bold !text-sm !rounded-xl !px-8 !py-3 !transition-all !shadow-sm !border-none !outline-none !m-0 !cursor-pointer active:!scale-95",icon:"!border-4 !border-rose-100 !text-rose-600 !scale-110 !mb-6 !mt-2"},buttonsStyling:!1,backdrop:"rgba(15, 23, 42, 0.4)"}).then(t=>{if(t.isConfirmed){const l=[...p.value];p.value=p.value.filter(u=>u.id!==o.id),E.delete(`/categories/${o.id}`,{onSuccess:()=>{k(s("category_deleted"))},onError:()=>{p.value=l,k("Failed to delete category","error")}})}})},se=()=>{const o=window.innerWidth<768;m.value=be({showProgress:!0,animate:!0,allowClose:!0,overlayOpacity:.85,stagePadding:10,onNextClick:()=>{m.value.isLastStep()?(o?(localStorage.setItem("tour_state","hub_to_tracker"),E.visit("/dashboard")):(localStorage.setItem("tour_state","tracker_intro"),E.visit("/tracker")),m.value.destroy()):m.value.moveNext()},steps:[{element:"#step-add-category",popover:{title:`<span class="text-xl font-bold">${s("tour_personalize_categories_title")}</span>`,description:s("tour_personalize_categories_desc")+C,side:"bottom",align:"start"}},{element:"#step-category-tabs",popover:{title:`<span class="text-xl font-bold">${s("tour_income_expense_title")}</span>`,description:s("tour_income_expense_desc")+C,side:"bottom",align:"start"}},{element:"#tour-categories-grid",popover:{title:`<span class="text-xl font-bold">${s("tour_category_system_title")}</span>`,description:s("tour_category_system_desc")+C,side:"bottom",align:"start"}},{element:o?"#mobile-nav-home":"#nav-tracker",popover:{title:o?s("tour_return_dashboard_title"):`<span class="text-xl font-bold">${s("tour_wealth_map_title")}</span>`,description:o?s("tour_return_dashboard_desc")+C:s("tour_wealth_map_desc")+C,side:"bottom",align:"start"}}]}),m.value.drive()},V=()=>{const o=localStorage.getItem("tour_state"),t=S.props.auth.user.has_completed_tour,l=["welcome","wallet_setup","transaction_setup","dashboard_explanation","analysis_intro","budget_setup","goals_setup","hub_to_categories","categories_setup"];if(!(m.value&&document.querySelector(".driver-popover"))&&(!o||o&&l.includes(o))){if(!o||o!=="categories_setup"){if(!o&&t)return;localStorage.setItem("tour_state","categories_setup")}const u=document.querySelector(".driver-popover"),j=document.querySelector(".driver-overlay");u&&u.remove(),j&&j.remove(),setTimeout(se,800)}};return ae(()=>{V(),window.addEventListener("skip-tour",()=>{localStorage.removeItem("tour_state"),m.value&&m.value.destroy(),E.post("/user/complete-tour",{},{preserveScroll:!0,preserveState:!0})})}),re(()=>{m.value&&m.value.destroy()}),J(()=>S.url,()=>{V()}),(o,t)=>(i(),d(M,null,[c(a(ie),{title:"Categories"}),c(fe,null,{default:de(()=>[e("header",he,[e("div",ye,[e("h1",we,n(s("categories_title")),1),e("p",ke,n(s("categories_desc")),1)]),e("button",{id:"step-add-category",onClick:te,class:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold text-sm flex items-center justify-center gap-2 transition-all shadow-lg shadow-indigo-200 hover:scale-[1.02] active:scale-95"},[c(a(pe),{class:"w-5 h-5"}),e("span",null,n(s("add_category")),1)])]),e("div",Ce,[e("button",{onClick:t[0]||(t[0]=l=>b.value="expense"),class:v(["flex-1 md:flex-none px-6 py-2.5 rounded-xl font-bold text-sm transition-all duration-300",b.value==="expense"?"bg-white text-rose-600 shadow-sm ring-1 ring-slate-900/5 scale-100":"text-slate-500 hover:text-slate-700"])},n(s("expense_flows")),3),e("button",{onClick:t[1]||(t[1]=l=>b.value="income"),class:v(["flex-1 md:flex-none px-6 py-2.5 rounded-xl font-bold text-sm transition-all duration-300",b.value==="income"?"bg-white text-emerald-600 shadow-sm ring-1 ring-slate-900/5 scale-100":"text-slate-500 hover:text-slate-700"])},n(s("income_sources")),3)]),e("div",Se,[(i(!0),d(M,null,G(O(b.value),l=>(i(),d("div",{key:l.id,onClick:u=>Z(l),class:"group relative glass-card p-5 md:p-6 transition-all duration-300 hover:bg-slate-50/50 cursor-pointer md:cursor-default active:scale-[0.98] active:md:scale-100"},[e("div",Te,[e("div",je,[e("div",{class:v(["w-2.5 h-2.5 rounded-full shrink-0 shadow-sm",l.color])},null,2),e("div",null,[e("h3",Ee,n(l.name),1),e("p",Me,n(l.is_system?"System":"Custom"),1)])]),e("div",ze,[l.is_system?(i(),d("div",{key:1,class:"p-2.5 text-slate-200",title:s("system_category_lock_msg")},[c(a(R),{class:"w-4 h-4"})],8,Ie)):(i(),d(M,{key:0},[e("button",{onClick:I(u=>F(l),["stop"]),class:"p-2.5 text-slate-400 hover:text-indigo-600 rounded-xl transition-all border border-slate-100 hover:shadow-sm",title:s("edit_category")},[c(a(H),{class:"w-4 h-4"})],8,Be),e("button",{onClick:I(u=>q(l),["stop"]),class:"p-2.5 text-slate-400 hover:text-rose-600 rounded-xl transition-all border border-slate-100 hover:shadow-sm",title:s("delete_category_title",{name:l.name})},[c(a(K),{class:"w-4 h-4"})],8,Pe)],64))])])],8,$e))),128)),O(b.value).length===0?(i(),d("div",Le,[e("p",Ne,n(s("no_categories")),1)])):f("",!0)])]),_:1}),(i(),P(W,{to:"body"},[h.value?(i(),d("div",De,[e("div",{class:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity",onClick:T}),e("div",Oe,[e("div",Fe,[e("h2",Ue,n($.value?s("edit_category"):s("new_category")),1),e("p",qe,n($.value?s("update_category_desc"):s("new_category_desc")),1)]),e("div",Ve,[e("form",{onSubmit:I(U,["prevent"]),class:"space-y-6"},[e("div",Ae,[e("button",{type:"button",onClick:t[2]||(t[2]=l=>a(r).type="income"),class:v([a(r).type==="income"?"bg-emerald-500 text-white shadow-lg shadow-emerald-200":"text-slate-500 hover:text-slate-900","flex-1 py-3.5 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[c(a(me),{class:"w-4 h-4"}),_(" "+n(s("income")),1)],2),e("button",{type:"button",onClick:t[3]||(t[3]=l=>a(r).type="expense"),class:v([a(r).type==="expense"?"bg-rose-500 text-white shadow-lg shadow-rose-200":"text-slate-500 hover:text-slate-900","flex-1 py-3.5 rounded-xl transition-all font-bold text-sm flex items-center justify-center gap-2"])},[c(a(xe),{class:"w-4 h-4"}),_(" "+n(s("expense")),1)],2)]),a(r).errors.type?(i(),d("p",Je,[c(a(N),{class:"w-3.5 h-3.5"}),_(" "+n(a(r).errors.type),1)])):f("",!0),e("div",Ge,[e("label",We,n(s("category_name")),1),ce(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>a(r).name=l),type:"text",class:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all font-semibold text-slate-700 placeholder-slate-400",placeholder:s("category_name_placeholder"),required:""},null,8,He),[[ue,a(r).name]]),a(r).errors.name?(i(),d("p",Ke,[c(a(N),{class:"w-3.5 h-3.5"}),_(" "+n(a(r).errors.name),1)])):f("",!0)]),e("div",Re,[e("label",Xe,n(s("color_tag")),1),e("div",Qe,[(i(),d(M,null,G(ee,l=>e("button",{key:l,type:"button",onClick:u=>a(r).color=l,class:v(["w-9 h-9 rounded-full flex items-center justify-center transition-all hover:scale-110 active:scale-95 shadow-sm ring-2 ring-white",[l,a(r).color===l?"ring-offset-2 ring-indigo-500 scale-110":"opacity-70 hover:opacity-100"]])},[a(r).color===l?(i(),P(a(ve),{key:0,class:"w-4 h-4 text-white drop-shadow-md"})):f("",!0)],10,Ye)),64))]),a(r).errors.color?(i(),d("p",Ze,[c(a(N),{class:"w-3.5 h-3.5"}),_(" "+n(a(r).errors.color),1)])):f("",!0)])],32)]),e("div",et,[e("button",{onClick:T,type:"button",class:"flex-1 px-6 py-3.5 rounded-xl border border-slate-200 text-slate-600 font-bold text-sm hover:bg-white hover:border-slate-300 hover:text-slate-800 transition-all shadow-sm active:scale-95"},n(s("cancel")),1),e("button",{onClick:U,disabled:a(r).processing,class:"flex-1 px-6 py-3.5 rounded-xl bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-700 shadow-lg shadow-indigo-200 hover:shadow-xl hover:shadow-indigo-300 transition-all active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[a(r).processing?(i(),d("span",st)):(i(),d("span",ot,n($.value?s("update_category_btn"):s("save_category_btn")),1))],8,tt)])])])):f("",!0)])),(i(),P(W,{to:"body"},[y.value&&x.value?(i(),d("div",lt,[e("div",{class:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity",onClick:t[5]||(t[5]=l=>y.value=!1)}),e("div",at,[e("div",rt,[e("div",nt,[e("div",{class:v(["w-14 h-14 rounded-2xl flex items-center justify-center shadow-inner",x.value.color])},[...t[10]||(t[10]=[e("div",{class:"w-6 h-6 bg-white/30 rounded-full"},null,-1)])],2),e("div",null,[e("h2",it,n(x.value.name),1),e("span",dt,n(x.value.type),1)])]),e("button",{onClick:t[6]||(t[6]=l=>y.value=!1),class:"p-2 hover:bg-slate-100 rounded-xl text-slate-400 hover:text-slate-900 transition-all"},[c(a(ge),{class:"w-6 h-6"})])]),e("div",ct,[e("div",ut,[e("div",pt,[t[11]||(t[11]=e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1"},"Type",-1)),e("p",mt,n(x.value.type),1)]),e("div",xt,[t[12]||(t[12]=e("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1"},"Source",-1)),e("p",gt,n(x.value.is_system?"System":"Custom"),1)])]),x.value.is_system?(i(),d("div",vt,[c(a(R),{class:"w-5 h-5 text-amber-500 shrink-0"}),e("p",ft,n(s("system_category_lock_msg")),1)])):(i(),d("div",bt,[e("button",{onClick:t[7]||(t[7]=l=>{F(x.value),y.value=!1}),class:"flex items-center justify-center gap-2 py-3 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-xl font-bold text-sm transition-colors"},[c(a(H),{class:"w-4 h-4"}),_(" "+n(s("edit")),1)]),e("button",{onClick:t[8]||(t[8]=l=>{q(x.value),y.value=!1}),class:"flex items-center justify-center gap-2 py-3 bg-rose-50 hover:bg-rose-100 text-rose-600 rounded-xl font-bold text-sm transition-colors"},[c(a(K),{class:"w-4 h-4"}),_(" "+n(s("delete")),1)])]))])])])):f("",!0)])),c(_e,{show:B.value,title:"Category Limit Reached",description:"Unlock unlimited categories to organize your expenses exactly the way you want with the Professional Plan.",onClose:t[9]||(t[9]=l=>B.value=!1)},null,8,["show"])],64))}};export{$t as default};
