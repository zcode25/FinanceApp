import{r as u,w as Q,l as H,k as W,c as r,a as d,d as e,u as i,h as X,s as S,B as Y,b as F,z as g,t as s,D as C,x as ee,F as y,g as te,f as w,e as se,v as ae,Q as oe,q as G,P as le,T as ie,R as L,o as n,i as O}from"./app-z-5N8Bmv.js";import{A as ne}from"./arrow-left-CuetA_LB.js";import{U as de}from"./user-DmNRAWvJ.js";import{M as re}from"./mail-Dk0e6ill.js";import{S as J}from"./shield-check-Dr9JvVFm.js";import{S as R,C as ce,Z as ue,R as pe}from"./zap-DO75pTLS.js";import{C as z}from"./circle-check-moysHSi3.js";import{c as me}from"./createLucideIcon-DnEbPiDu.js";import{A as he}from"./arrow-right-BaGYft_v.js";/* empty css            */const xe=me("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),be={class:"min-h-screen bg-white font-sans flex flex-col items-center justify-center p-4 pb-20 sm:p-6 sm:pb-24 lg:p-12 relative overflow-hidden"},_e={class:"w-full max-w-6xl flex items-center justify-between mb-6 md:mb-10 relative z-10"},ge={class:"w-full max-w-6xl relative z-10"},ve={class:"grid grid-cols-1 lg:grid-cols-5 gap-6 md:gap-8 items-start"},fe={class:"lg:col-span-3 space-y-6"},we={class:"bg-white rounded-[2.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 overflow-hidden"},ye={class:"px-6 md:px-10 pt-8 pb-6 border-b border-slate-50 bg-white/50 backdrop-blur-md"},ke={class:"text-xl md:text-2xl font-bold text-slate-900 leading-tight mb-1"},je={class:"text-xs md:text-sm text-slate-500 font-medium"},Ce={class:"p-6 md:p-10 space-y-8"},Pe={class:"space-y-4"},Be={class:"text-xs font-bold text-slate-400 pl-1"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Me={class:"p-5 bg-slate-50 rounded-2xl border border-slate-100 flex items-center gap-5 transition-all hover:border-indigo-100 group"},Se={class:"w-12 h-12 rounded-2xl bg-white border border-slate-100 flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-50 transition-colors shadow-sm"},Ne={class:"text-[10px] font-bold text-slate-400"},Ve={class:"text-base font-bold text-slate-900"},Ae={class:"p-5 bg-slate-50 rounded-2xl border border-slate-100 flex items-center gap-5 transition-all hover:border-indigo-100 group"},Oe={class:"w-12 h-12 rounded-2xl bg-white border border-slate-100 flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-50 transition-colors shadow-sm"},Re={class:"text-[10px] font-bold text-slate-400"},ze={class:"text-base font-bold text-slate-900"},Te={class:"space-y-4"},De={class:"text-xs font-bold text-slate-400 pl-1"},Ee={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},Fe=["onClick","disabled"],Ge={class:"space-y-3"},Le=["src","alt"],Je={class:"text-sm font-bold leading-tight"},Ue={key:0,class:"absolute top-4 right-4 animate-in zoom-in-50 duration-300"},$e={class:"bg-indigo-600 rounded-full p-1 shadow-md"},Ke={class:"flex flex-col sm:flex-row items-center justify-center gap-8 py-4 opacity-70"},Ze={class:"flex items-center gap-4"},qe={class:"lg:col-span-2 space-y-6"},Qe={class:"bg-gradient-to-br from-purple-600 to-indigo-700 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 text-white shadow-2xl shadow-purple-200/40 relative overflow-hidden group"},He={class:"relative z-10"},We={class:"inline-flex items-center gap-2 px-4 py-2 bg-white/20 text-white rounded-full text-[10px] font-bold mb-6 backdrop-blur-md border border-white/10"},Xe={class:"flex items-center gap-6 mb-8"},Ye={class:"w-16 h-16 rounded-[1.5rem] bg-white/10 border border-white/20 flex items-center justify-center shadow-lg backdrop-blur-md"},et={class:"text-xl md:text-2xl font-bold leading-none mb-1 text-white"},tt={class:"text-purple-100 font-bold text-xs leading-tight"},st={class:"space-y-3 mb-8"},at={class:"flex items-center justify-between py-3 border-b border-white/10"},ot={class:"text-xs font-bold text-purple-100"},lt={class:"text-right"},it={class:"text-lg font-bold text-white"},nt={class:"text-[9px] font-bold text-purple-200 leading-tight"},dt={class:"grid grid-cols-1 gap-2.5 py-1"},rt={class:"flex items-center gap-2.5 text-[11px] font-bold text-purple-50"},ct={class:"w-4.5 h-4.5 rounded-full bg-white/20 flex items-center justify-center shrink-0"},ut={class:"flex items-center gap-2.5 text-[11px] font-bold text-purple-50"},pt={class:"w-4.5 h-4.5 rounded-full bg-white/20 flex items-center justify-center shrink-0"},mt={class:"mb-8 animate-in fade-in duration-500 delay-150"},ht={class:"flex gap-2"},xt={class:"relative group flex-1"},bt=["disabled","placeholder"],_t=["disabled"],gt={key:0},vt={key:1},ft={key:0,class:"text-[10px] font-bold text-rose-300 mt-2 px-3 animate-in fade-in duration-300"},wt={key:1,class:"text-[10px] font-bold text-emerald-300 mt-2 px-3 animate-in fade-in duration-300"},yt={class:"p-6 bg-black/10 rounded-2xl border border-white/5 mb-8 backdrop-blur-sm shadow-inner"},kt={class:"flex items-center justify-between mb-3"},jt={class:"text-xs font-bold text-purple-100"},Ct={class:"text-xs font-bold text-white"},Pt={key:0,class:"flex items-center justify-between mb-3 animate-in slide-in-from-top-2 duration-300 border-b border-white/5 pb-3"},Bt={class:"text-xs font-bold text-emerald-300 flex items-center gap-2"},It={key:0,class:"bg-emerald-500/20 px-1.5 py-0.5 rounded-md text-[9px] ml-1 border border-emerald-500/30"},Mt={class:"text-xs font-bold text-emerald-400"},St={class:"flex items-center justify-between mb-4"},Nt={class:"text-xs font-bold text-purple-100"},Vt={class:"text-xs font-bold text-emerald-400"},At={class:"pt-4 border-t border-white/10 flex items-center justify-between"},Ot={class:"text-sm font-bold text-white"},Rt={class:"text-2xl font-bold text-white"},zt={key:0,class:"mb-5 p-4 bg-amber-400/10 border border-amber-400/20 rounded-[1.25rem] animate-in fade-in slide-in-from-top-2 duration-300"},Tt={class:"flex flex-col gap-3"},Dt={class:"flex gap-3 text-left"},Et={class:"text-[11px] font-bold text-amber-50 leading-relaxed"},Ft=["disabled"],Gt={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md"},Lt={class:"bg-white rounded-[2.5rem] w-full max-w-md overflow-hidden shadow-2xl relative"},Jt={class:"h-32 bg-gradient-to-br from-purple-600 to-indigo-700 relative overflow-hidden flex items-center justify-center"},Ut={class:"w-16 h-16 bg-white/20 backdrop-blur-xl rounded-2xl flex items-center justify-center border border-white/20 shadow-xl"},$t={class:"p-8 md:p-10 text-center"},Kt={class:"text-2xl font-bold text-slate-900 mb-3"},Zt={class:"text-sm font-bold text-slate-500 leading-relaxed mb-8"},qt={class:"flex flex-col gap-3"},ls={__name:"Checkout",props:{plan:Object,user:Object,existing_transaction:Object},setup(h){const N=W(),a=(l,t={})=>{let o=N.props.translations?.[l]||l;return Object.keys(t).forEach(A=>{o=o.replace(`:${A}`,t[A])}),o},c=h,P=u(!1),x=u(""),p=u(""),v=u(""),k=u(!1),U=u(c.plan.raw_price),_=u(0),B=u(0),m=u(""),f=u(""),I=u(!1),b=u(null),j=u(null),T=G(()=>{if(!b.value||!j.value)return!1;const l=JSON.stringify({plan:c.plan.id,promo:x.value,grand_total:M.value,payment_method:m.value});return j.value===l});Q(x,()=>{p.value="",v.value="",_.value=0,B.value=0});const M=G(()=>Math.max(0,U.value-_.value)),D=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),V=()=>{x.value&&(k.value=!0,p.value="",v.value="",_.value=0,L.post(C("subscription.promo.validate"),{promo_code:x.value,plan_id:c.plan.id}).then(l=>{l.data.valid?(_.value=l.data.discount_amount,B.value=l.data.discount_percentage,v.value=l.data.message,p.value=""):(p.value=l.data.message||"Invalid promo code",v.value="",_.value=0)}).catch(l=>{p.value=l.response?.data?.message||"Error validating promo code"}).finally(()=>{k.value=!1}))};H(()=>{if(!window.snap){const l=N.props.midtrans_is_production,t="midtrans-snap-js";if(!document.getElementById(t)){const o=document.createElement("script");o.id=t,o.src=l?"https://app.midtrans.com/snap/snap.js":"https://app.sandbox.midtrans.com/snap/snap.js",o.setAttribute("data-client-key",N.props.midtrans_client_key),o.async=!0,document.head.appendChild(o)}}c.existing_transaction&&(b.value=c.existing_transaction.snap_token,x.value=c.existing_transaction.promo_code||"",m.value=c.existing_transaction.payment_method||"",_.value=c.existing_transaction.discount_amount||0,c.existing_transaction.promo_code&&V(),j.value=JSON.stringify({plan:c.plan.id,promo:c.existing_transaction.promo_code||"",grand_total:c.existing_transaction.amount,payment_method:m.value}),f.value=a("payment_delayed_notice"))});const $=[{id:"bni",name:"BNI VA",type:"virtual_account",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Bank_Negara_Indonesia_logo_%282004%29.svg/512px-Bank_Negara_Indonesia_logo_%282004%29.svg.png"},{id:"bri",name:"BRI VA",type:"virtual_account",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/BRI_2025_%28with_full_name%29.svg/512px-BRI_2025_%28with_full_name%29.svg.png"},{id:"mandiri",name:"Mandiri VA",type:"virtual_account",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Bank_Mandiri_logo_2016.svg/512px-Bank_Mandiri_logo_2016.svg.png"},{id:"permata",name:"Permata VA",type:"virtual_account",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Permata_Bank_%282024%29.svg/512px-Permata_Bank_%282024%29.svg.png"},{id:"cimb",name:"CIMB VA",type:"virtual_account",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/CIMB_Niaga_logo.svg/512px-CIMB_Niaga_logo.svg.png"},{id:"gopay",name:"GoPay",type:"ewallet",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Gopay_logo.svg/512px-Gopay_logo.svg.png"}],K=()=>{if(T.value){E(b.value);return}I.value=!0},Z=()=>{I.value=!1,q()},q=async()=>{if(!m.value){alert(a("select_payment_method_alert"));return}const l=JSON.stringify({plan:c.plan.id,promo:x.value,grand_total:M.value,payment_method:m.value});P.value=!0,p.value="",f.value="";try{const t=await L.post(C("subscription.checkout"),{plan:c.plan.id,promo_code:v.value?x.value:null,payment_method:m.value});t.data.is_free?window.location.href=C("dashboard",{upgrade_success:1}):t.data.snap_token&&(b.value=t.data.snap_token,j.value=l,E(t.data.snap_token))}catch(t){p.value=t.response?.data?.message||a("payment_failed_error")}finally{P.value=!1}},E=l=>{window.snap.pay(l,{onSuccess:function(t){window.location.href=C("dashboard",{upgrade_success:1})},onPending:function(t){f.value=a("payment_pending_instructions"),p.value=""},onError:function(t){f.value="",p.value=a("payment_failed_alert"),b.value=null,j.value=null},onClose:function(){f.value=a("payment_delayed_notice"),p.value=""}})};return(l,t)=>(n(),r(y,null,[d(i(X),{title:a("confirm_upgrade")},null,8,["title"]),e("div",be,[t[10]||(t[10]=e("div",{class:"absolute top-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-50/50 rounded-full blur-[120px] pointer-events-none"},null,-1)),t[11]||(t[11]=e("div",{class:"absolute bottom-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-50/40 rounded-full blur-[100px] pointer-events-none"},null,-1)),e("header",_e,[t[2]||(t[2]=Y('<div class="flex items-center gap-2 overflow-hidden"><div class="flex items-center justify-center"><img src="/img/logo_vibefinance.png" class="h-6 md:h-7 w-auto object-contain" alt="VibeFinance Logo"></div><div class="flex flex-col leading-tight"><span class="text-lg md:text-xl tracking-tight text-slate-900" style="font-family:Outfit, sans-serif;"><span class="font-semibold">Vibe</span><span class="font-light text-indigo-600">Finance</span></span><span class="text-[9px] font-medium text-slate-400">Powered by terasweb.id</span></div></div>',1)),d(i(ee),{href:i(C)("dashboard"),class:"flex items-center gap-2 px-5 py-2.5 bg-slate-50 hover:bg-slate-100 text-slate-600 font-bold text-sm rounded-xl transition-all active:scale-95 border border-slate-100 shadow-sm whitespace-nowrap"},{default:F(()=>[d(i(ne),{class:"w-4 h-4"}),g(" "+s(a("return_to_dashboard")),1)]),_:1},8,["href"])]),e("div",ge,[e("div",ve,[e("div",fe,[e("div",we,[e("div",ye,[e("h1",ke,s(a("secure_checkout")),1),e("p",je,s(a("finalize_premium")),1)]),e("div",Ce,[e("div",Pe,[e("h3",Be,s(a("billing_info")),1),e("div",Ie,[e("div",Me,[e("div",Se,[d(i(de),{class:"w-6 h-6"})]),e("div",null,[e("p",Ne,s(a("account_name")),1),e("p",Ve,s(h.user.name),1)])]),e("div",Ae,[e("div",Oe,[d(i(re),{class:"w-6 h-6"})]),e("div",null,[e("p",Re,s(a("billing_email")),1),e("p",ze,s(h.user.email),1)])])])]),e("div",Te,[e("h3",De,s(a("payment_method")),1),e("div",Ee,[(n(),r(y,null,te($,o=>e("button",{key:o.id,onClick:A=>m.value=o.id,disabled:!!b.value,class:O(["p-6 rounded-[1.5rem] border text-left transition-all relative overflow-hidden group min-h-[130px] flex flex-col justify-between",m.value===o.id?"bg-white border-indigo-600 text-slate-900 ring-8 ring-indigo-50 shadow-xl shadow-indigo-100/50":"bg-white border-slate-100 text-slate-900 hover:border-indigo-200 hover:bg-slate-50 shadow-sm",b.value?"opacity-50 cursor-not-allowed grayscale-[0.5]":""])},[e("div",Ge,[e("div",{class:O(["w-16 h-12 rounded-2xl flex items-center justify-center p-2.5 bg-white shadow-sm border border-slate-50 transition-all group-hover:scale-110",m.value===o.id?"border-indigo-100 scale-105":""])},[e("img",{src:o.logo,alt:o.name,class:"w-full h-full object-contain"},null,8,Le)],2),e("div",null,[e("p",{class:O(["text-[10px] font-bold mb-0.5",m.value===o.id?"text-indigo-600":"text-slate-400"])},s(a(o.type)),3),e("p",Je,s(o.name),1)])]),m.value===o.id?(n(),r("div",Ue,[e("div",$e,[d(i(z),{class:"w-4 h-4 text-white"})])])):w("",!0)],10,Fe)),64))])])])]),e("div",Ke,[e("div",Ze,[d(i(J),{class:"w-6 h-6 text-indigo-600"}),t[3]||(t[3]=e("div",{class:"text-left"},[e("p",{class:"text-[10px] font-bold text-slate-900"},"Bank-Grade"),e("p",{class:"text-xs font-bold text-slate-500"},"SSL Secure Transaction")],-1))]),t[4]||(t[4]=e("div",{class:"h-8 w-[1px] bg-slate-200 hidden sm:block"},null,-1)),t[5]||(t[5]=e("div",{class:"flex items-center gap-4"},[e("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/9d/Midtrans.png",alt:"Midtrans",class:"h-8 object-contain grayscale hover:grayscale-0 transition-all"}),e("p",{class:"text-[10px] font-bold text-slate-400"},"Official Payment Gateway")],-1))])]),e("div",qe,[e("div",Qe,[t[7]||(t[7]=e("div",{class:"absolute top-0 right-0 -mr-20 -mt-20 w-80 h-80 bg-white/10 rounded-full blur-[80px]"},null,-1)),t[8]||(t[8]=e("div",{class:"absolute bottom-0 left-0 -ml-20 -mb-20 w-60 h-60 bg-white/10 rounded-full blur-[60px]"},null,-1)),e("div",He,[e("div",We,[d(i(R),{class:"w-3.5 h-3.5 text-amber-300"}),g(" "+s(a("subscription_plan")),1)]),e("div",Xe,[e("div",Ye,[parseInt(h.plan.id)===3?(n(),S(i(ce),{key:0,class:"w-8 h-8 text-white"})):parseInt(h.plan.id)===4?(n(),S(i(ue),{key:1,class:"w-8 h-8 text-white"})):(n(),S(i(pe),{key:2,class:"w-8 h-8 text-white"}))]),e("div",null,[e("h2",et,s(h.plan.name),1),e("p",tt,s(h.plan.description),1)])]),e("div",st,[e("div",at,[e("span",ot,s(a("pricing_plan")),1),e("div",lt,[e("p",it,s(h.plan.price),1),e("p",nt,s(h.plan.period),1)])]),e("div",dt,[e("div",rt,[e("div",ct,[d(i(z),{class:"w-3 h-3 text-white"})]),g(" "+s(a("instant_activation")),1)]),e("div",ut,[e("div",pt,[d(i(z),{class:"w-3 h-3 text-white"})]),g(" "+s(a("unlimited_data_insights")),1)])])]),e("div",mt,[e("div",ht,[e("div",xt,[se(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>x.value=o),type:"text",disabled:k.value||!!b.value,class:"w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-[11px] font-bold placeholder-white/40 focus:ring-2 focus:ring-white focus:border-white transition-all text-white disabled:opacity-50 disabled:cursor-not-allowed",placeholder:a("promo_code"),onKeyup:oe(V,["enter"])},null,40,bt),[[ae,x.value]]),d(i(R),{class:"absolute right-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white/20 group-focus-within:text-amber-300 transition-colors pointer-events-none"})]),e("button",{onClick:V,disabled:!x.value||k.value||!!b.value,class:"px-5 bg-white text-purple-600 font-bold text-[9px] rounded-xl hover:bg-purple-50 transition-all active:scale-95 disabled:opacity-50"},[k.value?(n(),r("span",gt,"...")):(n(),r("span",vt,s(a("apply")),1))],8,_t)]),p.value?(n(),r("p",ft,s(p.value),1)):w("",!0),v.value?(n(),r("p",wt,s(v.value),1)):w("",!0)]),e("div",yt,[e("div",kt,[e("span",jt,s(a("subtotal")),1),e("span",Ct,s(h.plan.price),1)]),_.value>0?(n(),r("div",Pt,[e("span",Bt,[d(i(R),{class:"w-3 h-3"}),g(" "+s(a("promo_discount"))+" ",1),B.value?(n(),r("span",It," -"+s(B.value)+"% ",1)):w("",!0)]),e("span",Mt,"-"+s(D(_.value)),1)])):w("",!0),e("div",St,[e("span",Nt,s(a("taxes_fees")),1),e("span",Vt,s(a("included")),1)]),e("div",At,[e("span",Ot,s(a("grand_total")),1),e("span",Rt,s(D(M.value)),1)])]),f.value?(n(),r("div",zt,[e("div",Tt,[e("div",Dt,[d(i(xe),{class:"w-4 h-4 text-amber-300 shrink-0 mt-0.5"}),e("p",Et,s(f.value),1)])])])):w("",!0),e("button",{onClick:K,disabled:P.value||!m.value,class:"w-full py-5 bg-white text-purple-600 rounded-[1.5rem] font-bold text-sm shadow-xl shadow-purple-900/20 hover:bg-slate-50 transition-all flex items-center justify-center gap-3 active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed group/pay"},[P.value?(n(),r(y,{key:0},[t[6]||(t[6]=e("div",{class:"w-5 h-5 border-4 border-slate-200 border-t-purple-600 rounded-full animate-spin"},null,-1)),g(" "+s(a("processing")),1)],64)):(n(),r(y,{key:1},[M.value===0?(n(),r(y,{key:0},[g(s(a("claim_premium_now")),1)],64)):(n(),r(y,{key:1},[g(s(T.value?a("continue_payment"):a("complete_payment")),1)],64)),d(i(he),{class:"w-5 h-5 group-hover/pay:translate-x-1 transition-transform"})],64))],8,Ft)])])])])]),(n(),S(ie,{to:"body"},[I.value?(n(),r("div",Gt,[d(le,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95",appear:""},{default:F(()=>[e("div",Lt,[e("div",Jt,[t[9]||(t[9]=e("div",{class:"absolute inset-0 opacity-20"},[e("div",{class:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full blur-3xl -translate-x-12 -translate-y-12"}),e("div",{class:"absolute bottom-0 right-0 w-32 h-32 bg-white rounded-full blur-3xl translate-x-12 translate-y-12"})],-1)),e("div",Ut,[d(i(J),{class:"w-8 h-8 text-white"})])]),e("div",$t,[e("h3",Kt,s(a("checkout_confirm_title")),1),e("p",Zt,s(a("checkout_confirm_text")),1),e("div",qt,[e("button",{onClick:Z,class:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-bold text-sm shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-95"},s(a("yes_continue")),1),e("button",{onClick:t[1]||(t[1]=o=>I.value=!1),class:"w-full py-4 bg-slate-100 text-slate-600 rounded-2xl font-bold text-sm hover:bg-slate-200 transition-all active:scale-95"},s(a("cancel")),1)])])])]),_:1})])):w("",!0)]))])],64))}};export{ls as default};
