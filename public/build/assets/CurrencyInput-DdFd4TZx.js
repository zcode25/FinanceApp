import{r as y,w as g,j as d,q as m,k as D,K as x,G as S,p as T,x as p,I as b,s as v,S as k}from"./vendor-COAloQYc.js";const C={class:"relative"},R=["value","placeholder"],B={key:0,class:"absolute -bottom-7 left-0 text-xs font-semibold text-rose-600 bg-rose-50 border border-rose-100 px-3 py-1.5 rounded-lg flex items-center gap-2 shadow-sm"},F={key:0,class:"text-rose-500 text-xs mt-1 font-medium ml-1 flex items-center gap-1.5"},j={__name:"CurrencyInput",props:{modelValue:[Number,String],placeholder:String,currency:{type:String,default:"IDR"},error:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:V}){const t=s,h=V,o=y(""),n=e=>e===""||e===null||e===void 0?"":new Intl.NumberFormat(t.currency==="IDR"?"id-ID":"en-US",{style:"currency",currency:t.currency,minimumFractionDigits:0,maximumFractionDigits:2}).format(e);t.modelValue&&(o.value=n(t.modelValue));const a=y("");let f;const w=e=>{const l=t.currency==="IDR"?",":".",N=new RegExp(`[^0-9${l}]`,"g");e.inputType==="insertText"&&e.data&&(N.test(e.data)?(a.value=`Numbers and '${l}' only`,clearTimeout(f),f=setTimeout(()=>a.value="",3e3)):a.value="");let u=e.target.value,r;t.currency==="IDR"?(r=u.replace(/\./g,""),r=r.replace(/,/g,".")):r=u.replace(/,/g,""),r=r.replace(/[^0-9.]/g,"");const i=r.split(".");i.length>2&&(r=i[0]+"."+i.slice(1).join("")),r.includes(".");let c=parseFloat(r);isNaN(c)&&(c=0),h("update:modelValue",c),o.value=u},I=()=>{a.value="",o.value=n(t.modelValue)};return g(()=>t.modelValue,e=>{o.value=n(e)}),g(()=>t.currency,()=>{t.modelValue&&(o.value=n(t.modelValue))}),(e,l)=>(p(),d("div",C,[m("input",{type:"text",value:o.value,onInput:w,onBlur:I,class:S(["w-full bg-slate-50 border border-slate-200 text-slate-900 placeholder-slate-400 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all px-4 py-3 font-semibold text-sm",{"border-rose-500 focus:border-rose-500 focus:ring-rose-500/20":a.value||s.error}]),placeholder:s.placeholder||"Rp 0"},null,42,R),D(k,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:T(()=>[a.value?(p(),d("div",B,[l[0]||(l[0]=m("span",{class:"w-1.5 h-1.5 rounded-full bg-rose-600 animate-pulse"},null,-1)),b(" "+v(a.value),1)])):x("",!0)]),_:1}),s.error?(p(),d("p",F,[l[1]||(l[1]=m("span",{class:"w-1.5 h-1.5 rounded-full bg-rose-500 inline-block"},null,-1)),b(" "+v(s.error),1)])):x("",!0)]))}};export{j as _};
